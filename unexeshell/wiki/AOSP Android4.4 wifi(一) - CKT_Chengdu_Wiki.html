<!DOCTYPE html>
<!-- saved from url=(0067)http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80) -->
<html lang="zh-CN" dir="ltr" class="client-js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.20.2">
<link rel="alternate" type="application/x-wiki" title="编辑" href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit">
<link rel="edit" title="编辑" href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit">
<link rel="shortcut icon" href="http://10.120.10.100:9002/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="http://10.120.10.100:9002/opensearch_desc.php" title="CKT_Chengdu_Wiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="http://10.120.10.100:9002/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="CKT_Chengdu_Wiki的Atom" href="http://10.120.10.100:9002/index.php?title=Special:RecentChanges&feed=atom">
<link rel="stylesheet" href="http://10.120.10.100:9002/load.php?debug=false&lang=zh-cn&modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&only=styles&skin=monobook&*">
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><style>.mw-collapsible-toggle{float:right} li .mw-collapsible-toggle{float:none} .mw-collapsible-toggle-li{list-style:none}
/* cache key: wikidb:resourceloader:filter:minify-css:7:4250852ed2349a0d4d0fc6509a3e7d4c */.suggestions{overflow:hidden;position:absolute;top:0;left:0;width:0;border:none;z-index:1099;padding:0;margin:-1px -1px 0 0} html > body .suggestions{margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0}.suggestions-result{color:black;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left}.suggestions-result-current{background-color:#4C59A6;color:white}.suggestions-special .special-label{color:gray;text-align:left}.suggestions-special .special-query{color:black;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:silver}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:white}.autoellipsis-matched,.highlight{font-weight:bold}
/* cache key: wikidb:resourceloader:filter:minify-css:7:9780324491b653a3780e2d029bdc140c */</style><meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikidb:resourceloader:filter:minify-css:7:7a3748d34e6456ae8d0f053363f745f7 */</style>

<script src="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/load.php"></script><script src="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/load(1).php"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"AOSP_Android4.4_wifi(一)","wgTitle":"AOSP Android4.4 wifi(一)","wgCurRevisionId":130758,"wgArticleId":22708,"wgIsArticle":true,"wgAction":"view","wgUserName":"Haolong.zhang","wgUserGroups":["EditGrp","*","user","autoconfirmed"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"AOSP_Android4.4_wifi(一)","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgFCKEditorDir":"extensions/WYSIWYG/ckeditor/","wgFCKEditorExtDir":"extensions/WYSIWYG","wgFCKEditorToolbarSet":"Wiki","wgFCKEditorHeight":"0","wgCKeditorMagicWords":{"wikitags":["nowiki","includeonly","onlyinclude","noinclude","4cs","6502acme","6502kickass","6502tasm","68000devpac","abap","actionscript","actionscript3","ada","algol68","apache","applescript","apt_sources","arm","asm","asp","asymptote","autoconf","autohotkey","autoit","avisynth","awk","bascomavr","bash","basic4gl","bf","bibtex","blitzbasic","bnf","boo","c","c_loadrunner","c_mac","caddcl","cadlisp","cfdg","cfm","chaiscript","cil","clojure","cmake","cobol","coffeescript","cpp","cpp-qt","csharp","css","cuesheet","d","dcl","dcpu16","dcs","delphi","diff","dos","dot","e","ecmascript","eiffel","email","epc","erlang","euphoria","f1","falcon","fo","fortran","freebasic","freeswitch","fsharp","gambas","gdb","genero","genie","gettext","glsl","gml","gnuplot","go","groovy","gwbasic","haskell","haxe","hicest","hq9plus","html4strict","html5","icon","idl","ini","inno","intercal","io","j","java","java5","javascript","jquery","kixtart","klonec","klonecpp","latex","lb","ldif","lisp","llvm","locobasic","logtalk","lolcode","lotusformulas","lotusscript","lscript","lsl2","lua","m68k","magiksf","make","mapbasic","matlab","mirc","mmix","modula2","modula3","mpasm","mxml","mysql","nagios","netrexx","newlisp","nsis","oberon2","objc","objeck","ocaml","ocaml-brief","octave","oobas","oorexx","oracle11","oracle8","oxygene","oz","parasail","parigp","pascal","pcre","per","perl","perl6","pf","php","php-brief","pic16","pike","pixelbender","pli","plsql","postgresql","povray","powerbuilder","powershell","proftpd","progress","prolog","properties","providex","purebasic","pycon","pys60","python","q","qbasic","rails","rebol","reg","rexx","robots","rpmspec","rsplus","ruby","sas","scala","scheme","scilab","sdlbasic","smalltalk","smarty","spark","sparql","sql","stonescript","systemverilog","tcl","teraterm","text","thinbasic","tsql","typoscript","unicon","upc","urbi","uscript","vala","vb","vbnet","vedit","verilog","vhdl","vim","visualfoxpro","visualprolog","whitespace","whois","winbatch","xbasic","xml","xorg_conf","xpp","yaml","z80","zxbasic","pre","gallery","ref","references"],"magicwords":["NOTOC","FORCETOC","TOC","NOEDITSECTION","NEWSECTIONLINK","NONEWSECTIONLINK","NOCONTENTCONVERT","NOCC","NOTITLECONVERT","NOTC","NOGALLERY","INDEX","NOINDEX","STATICREDIRECT","NOGALLERY","HIDDENCAT","START","END"],"datevars":["CURRENTYEAR","CURRENTMONTH","CURRENTMONTHNAME","CURRENTMONTHNAMEGEN","CURRENTMONTHABBREV","CURRENTDAY","CURRENTDAY2","CURRENTDOW","CURRENTDAYNAME","CURRENTTIME","CURRENTHOUR","CURRENTWEEK","CURRENTTIMESTAMP"],"wikivars":["SITENAME","SERVER","SERVERNAME","DIRMARK","SCRIPTPATH","CURRENTVERSION","CONTENTLANG","REVISIONID","REVISIONDAY","REVISIONDAY2","REVISIONMONTH","REVISIONYEAR","REVISIONTIMESTAMP","REVISIONUSER","FULLPAGENAME","PAGENAME","BASEPAGENAME","SUBPAGENAME","SUBJECTPAGENAME","TALKPAGENAME","NAMESPACE","ARTICLESPACE","TALKSPACE"],"parserhooks":["lc","lcfirst","uc","ucfirst","formatnum","#dateformat","padleft","padright","plural","grammar","#language","int","#tag","#int","#ns","#nse","#urlencode","#lcfirst","#ucfirst","#lc","#uc","#localurl","#localurle","#fullurl","#fullurle","#canonicalurl","#canonicalurle","#formatnum","#grammar","#gender","#plural","#numberofpages","#numberofusers","#numberofactiveusers","#numberofarticles","#numberoffiles","#numberofadmins","#numberingroup","#numberofedits","#numberofviews","#padleft","#padright","#anchorencode","#special","#speciale","#defaultsort","#filepath","#pagesincategory","#pagesize","#protectionlevel","#namespace","#namespacee","#namespacenumber","#talkspace","#talkspacee","#subjectspace","#subjectspacee","#pagename","#pagenamee","#fullpagename","#fullpagenamee","#basepagename","#basepagenamee","#subpagename","#subpagenamee","#talkpagename","#talkpagenamee","#subjectpagename","#subjectpagenamee","#formatdate","#displaytitle"]},"wgCKeditorUseBuildin4Extensions":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":"1","rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3
,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"riched_use_toggle":1,"riched_start_disabled":1,"riched_use_popup":1,"riched_toggle_remember_state":1,"variant":"en","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"nickname":"","timecorrection":"Offset|0","watchlisttoken":"e6d2d70fd3fee5a373912c45a169d30d69f324af"});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"decc1ed8c6f46455b5f1c6c71cf6c3e5+\\","watchToken":"9d5653f6182b12697a28eda6581e4a5c+\\"});;},{},{});
/* cache key: wikidb:resourceloader:filter:minify-js:7:0cb1f48e6635d45ce7463ff21dfb0770 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><script type="text/javascript" src="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/load(2).php"></script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-AOSP_Android4_4_wifi_一 skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading"><span dir="auto">AOSP Android4.4 wifi(一)</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">来自CKT_Chengdu_Wiki</div>
		<div id="contentSub" lang="zh-CN" dir="ltr"></div>
		<div id="jump-to-nav" class="mw-jump">跳转到： <a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#column-one">导航</a>、<a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#searchInput">搜索</a></div>
		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><a href="http://10.120.10.100:9002/index.php/Qualcomm_Platform_Cases" title="Qualcomm Platform Cases">返回</a>
</p><p><br> 
</p>
<pre>== <b>第零章：前言</b> ==
</pre>
<p>本章内容主要讲解 wifi 部分的 wpa_supplicant 部分
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>目录</h2><span class="toctoggle">&nbsp;[<a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#" class="internal" id="togglelink">隐藏</a>]&nbsp;</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.E7.AC.AC.E4.B8.80.E7.AB.A0.EF.BC.9Awpa_supplicant.E7.AE.80.E4.BB.8B.28android.E7.AB.AF.29"><span class="tocnumber">1</span> <span class="toctext"><b>第一章：wpa_supplicant简介(android端)</b></span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#A:.E6.9C.AF.E8.AF.AD.E7.9B.B8.E5.85.B3"><span class="tocnumber">1.1</span> <span class="toctext"><b>A:术语相关  </b></span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#B:.E6.89.80.E5.A4.84.E4.BD.8D.E7.BD.AE"><span class="tocnumber">1.2</span> <span class="toctext"><b>B:所处位置 </b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.E7.AC.AC.E4.BA.8C.E7.AB.A0.EF.BC.9A.E5.AF.B9.E4.B8.8A.E6.8E.A5.E5.8F.A3"><span class="tocnumber">2</span> <span class="toctext"><b>第二章：对上接口</b></span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#A:.E5.85.B1.E4.BA.AB.E5.BA.93"><span class="tocnumber">2.1</span> <span class="toctext"><b>A:共享库  </b></span></a></li>
<li class="toclevel-2 tocsection-6"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#B:socket.E4.B9.8Bctrl_conn"><span class="tocnumber">2.2</span> <span class="toctext"><b>B:socket之ctrl_conn </b></span></a></li>
<li class="toclevel-2 tocsection-7"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#C:socket.E4.B9.8Bmonitor_conn"><span class="tocnumber">2.3</span> <span class="toctext"><b>C:socket之monitor_conn </b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.E7.AC.AC.E4.B8.89.E7.AB.A0.EF.BC.9A.E5.AF.B9.E4.B8.8B.E6.8E.A5.E5.8F.A3"><span class="tocnumber">3</span> <span class="toctext"><b>第三章：对下接口</b></span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#A.EF.BC.9Asocket_for_ioctl"><span class="tocnumber">3.1</span> <span class="toctext"><b>A：socket for ioctl </b></span></a></li>
<li class="toclevel-2 tocsection-10"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#B.EF.BC.9Anetlink"><span class="tocnumber">3.2</span> <span class="toctext"><b>B：netlink</b></span></a></li>
<li class="toclevel-2 tocsection-11"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#C.EF.BC.9APF_PACKET"><span class="tocnumber">3.3</span> <span class="toctext"><b>C：PF_PACKET </b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.E7.AC.AC.E5.9B.9B.E7.AB.A0.EF.BC.9Awpa_supplicant.E5.86.85.E9.83.A8.E4.BA.8B.E7.89.A9.E5.A4.84.E7.90.86.E9.87.8D.E8.A6.81loop.E5.87.BD.E6.95.B0.E7.AE.80.E4.BB.8B"><span class="tocnumber">4</span> <span class="toctext"><b>第四章：wpa_supplicant内部事物处理重要loop函数简介</b></span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#A.EF.BC.9Aloop.E4.BD.9C.E7.94.A8"><span class="tocnumber">4.1</span> <span class="toctext"><b>A：loop作用 </b></span></a></li>
<li class="toclevel-2 tocsection-14"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#B.EF.BC.9Acode_.E6.B5.81.E7.A8.8B"><span class="tocnumber">4.2</span> <span class="toctext"><b>B：code 流程 </b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.E7.AC.AC.E4.BA.94.E7.AB.A0.EF.BC.9Aandroid.E7.AB.AF.E7.9B.B8.E5.85.B3"><span class="tocnumber">5</span> <span class="toctext"><b>第五章：android端相关</b></span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#A.EF.BC.9A_service"><span class="tocnumber">5.1</span> <span class="toctext"><b>A： service </b></span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.2A.EF.BC.9A_service.E7.9A.84.E5.BB.BA.E7.AB.8B"><span class="tocnumber">5.1.1</span> <span class="toctext"><b>*： service的建立 </b></span></a></li>
<li class="toclevel-3 tocsection-18"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.2A.EF.BC.9A_service.E7.9A.84.E8.B0.83.E5.BA.A6"><span class="tocnumber">5.1.2</span> <span class="toctext"><b>*： service的调度 </b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#B.EF.BC.9Awpa_supplicant.conf"><span class="tocnumber">5.2</span> <span class="toctext"><b>B：wpa_supplicant.conf</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#.E7.AC.AC.E5.85.AD.E7.AB.A0.EF.BC.9A.E7.BB.93.E6.9D.9F.E8.AF.AD"><span class="tocnumber">6</span> <span class="toctext"><b>第六章：结束语</b></span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#A.EF.BC.9Asupplicant.E6.9E.B6.E6.9E.84.E5.9B.BE"><span class="tocnumber">6.1</span> <span class="toctext"><b>A：supplicant架构图</b></span></a></li>
<li class="toclevel-2 tocsection-22"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%B8%80)#B.EF.BC.9Amore_reference"><span class="tocnumber">6.2</span> <span class="toctext"><b>B：more reference</b></span></a></li>
</ul>
</li>
</ul>
</td></tr></tbody></table>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=1" title="编辑段落：第一章：wpa supplicant简介(android端)">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.B8.80.E7.AB.A0.EF.BC.9Awpa_supplicant.E7.AE.80.E4.BB.8B.28android.E7.AB.AF.29"> <b>第一章：wpa_supplicant简介(android端)</b> </span></h2>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=2" title="编辑段落：A:术语相关">编辑</a>]</span> <span class="mw-headline" id="A:.E6.9C.AF.E8.AF.AD.E7.9B.B8.E5.85.B3"> <b>A:术语相关  </b></span></h3>
<pre>   wpa_supplicant is a cross-platform WPA supplicant with support for WEP, WPA and WPA2 (IEEE 802.11i / RSN (Robust Secure Network)). It is suitable for both desktop
</pre>
<p>and laptop computers and even embedded systems.  wpa_supplicant is the IEEE 802.1X/WPA component that is used in the client stations. It implements key negotiation
</p><p>with a WPA Authenticator and it controls the roaming and IEEE
</p>
<pre>   wpa_supplicant，著名的开源项目源码之一，被谷歌修改后加入android移动平台，它主要是用来支持WEP，WPA/WPA2无线协议和加密认证的，而实际上的工作内容是通过
</pre>
<p>socket与驱动交互上报数据给用户，而用户可以通过socket发送命令给wpa_supplicant调动驱动来对WiFi芯片操作。 
</p>
<pre>   简单的说，wpa_supplicant就是WiFi驱动和用户的中转站外加对协议和加密认证的支持;实现了IEEE 802.11 b/g/n/ac/i等对WLAN对应的安全协议;当然针对中国自主创新的
</pre>
<p>WLAN协议WAPI(Wireless LAN Authentication and Privacy Infrastructure)，wpa_supplicant也是支持的很完美了.
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=3" title="编辑段落：B:所处位置">编辑</a>]</span> <span class="mw-headline" id="B:.E6.89.80.E5.A4.84.E4.BD.8D.E7.BD.AE"> <b>B:所处位置 </b></span></h3>
<pre>那么wpa_supplicant 在andriod层次所处的位置是什么位置呢？简单的说是HAL层和kernel driver层之间的一层;下面的图片（网上找的）清晰的告诉大家她所处的位置
</pre>
<p><a href="http://10.120.10.100:9002/index.php/File:Wpa_supplicant_location.png" class="image"><img alt="Wpa supplicant location.png" src="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/Wpa_supplicant_location.png" width="596" height="913"></a>
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=4" title="编辑段落：第二章：对上接口">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.BA.8C.E7.AB.A0.EF.BC.9A.E5.AF.B9.E4.B8.8A.E6.8E.A5.E5.8F.A3"> <b>第二章：对上接口</b> </span></h2>
<pre> 首先 wpa_supplicant 与上层和下层的交互都是通过socket来交互的; 
</pre>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=5" title="编辑段落：A:共享库">编辑</a>]</span> <span class="mw-headline" id="A:.E5.85.B1.E4.BA.AB.E5.BA.93"> <b>A:共享库  </b></span></h3>
<p>作用（使命）：建立与上层交互的socket,
</p><p>共享库：libwpa_client.so 
</p><p>编译Makefile:
</p><p>file: 	external/wpa_supplicant_8/wpa_supplicant/Android.mk
</p><p>include $(CLEAR_VARS)
</p><p>LOCAL_MODULE = libwpa_client
</p><p>LOCAL_CFLAGS = $(L_CFLAGS)
</p><p>LOCAL_SRC_FILES = src/common/wpa_ctrl.c src/utils/os_$(CONFIG_OS).c
</p><p>LOCAL_C_INCLUDES = $(INCLUDES)
</p><p>LOCAL_SHARED_LIBRARIES&nbsp;:= libcutils liblog
</p><p>LOCAL_COPY_HEADERS_TO&nbsp;:= libwpa_client
</p><p>LOCAL_COPY_HEADERS&nbsp;:= src/common/wpa_ctrl.h
</p><p>include $(BUILD_SHARED_LIBRARY)
</p><p>调用路径：
</p><p>JNI： frameworks/base/core/jni/android_net_wifi_WifiNative.cpp ------&gt;
</p><p>	static jboolean android_net_wifi_connectToSupplicant(JNIEnv* env, jobject)
</p>
<pre>	{
</pre>
<p>		return (::wifi_connect_to_supplicant() == 0);
</p>
<pre>	}
</pre>
<p>HAL:  hardware/libhardware_legacy/wifi/wifi.c ------&gt;
</p><p>int wifi_connect_to_supplicant()
</p>
<pre> {
</pre>
<pre>     ........
     ........
</pre>
<pre>     return wifi_connect_on_socket_path(path);
</pre>
<pre> }
</pre>
<p>HAL:  hardware/libhardware_legacy/wifi/wifi.c ------&gt;
</p><p>int wifi_connect_on_socket_path(const char *path)
</p><p>{
</p>
<pre>   ...
   ...
</pre>
<pre>   ctrl_conn = wpa_ctrl_open(path);
</pre>
<pre>    ....
    ....
</pre>
<pre>   monitor_conn = wpa_ctrl_open(path);
</pre>
<pre>   ......
   .....
</pre>
<p>}
</p><p>wpa_ctrl_open &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;就是来自共享库libwpa_client.so，
</p><p>通过上面共享库的调用，与上层交互的两个重要socket就已经完成。
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=6" title="编辑段落：B:socket之ctrl conn">编辑</a>]</span> <span class="mw-headline" id="B:socket.E4.B9.8Bctrl_conn"> <b>B:socket之ctrl_conn </b></span></h3>
<pre>  这个secket主要和WifiService打交道， 接受WifiService 发来的各种wifi 命令;
</pre>
<p>常见的调用过程：
</p><p>WifiService,p2pWifiP2pService,wpsService ------&gt;各种wifi command相关的函数接口
</p><p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</p><p>WifiNative 转发上层wifi command 到JNI ------&gt; 各种wifi command相关的函数接口
</p><p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</p><p>JNI 规则到HAL层 -----------------&gt; Java接口到本地接口wifi_command()
</p><p>HAL:  hardware/libhardware_legacy/wifi/wifi.c ------&gt;
</p><p>	int wifi_command(const char *command, char *reply, size_t *reply_len)
</p><p>	{
</p><p>		return wifi_send_command(command, reply, reply_len);
</p><p>	}
</p><p>HAL:  hardware/libhardware_legacy/wifi/wifi.c ------&gt;
</p><p>int wifi_send_command(const char *cmd, char *reply, size_t *reply_len)
</p>
<pre> {
</pre>
<pre>       ......
</pre>
<p>	......
</p>
<pre>ret = wpa_ctrl_request(ctrl_conn, cmd, strlen(cmd), reply, reply_len, NULL);
</pre>
<pre>     ..........
     .........
</pre>
<pre>}
</pre>
<p>至此，android 上传传过来的各种命令（start, scarn, config, connect to ap ......）就通过socket转发到wpa_supplicant
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=7" title="编辑段落：C:socket之monitor conn">编辑</a>]</span> <span class="mw-headline" id="C:socket.E4.B9.8Bmonitor_conn"> <b>C:socket之monitor_conn </b></span></h3>
<pre>   这个secket主要和frameworks/base/wifi/java/android/net/wifi/WifiMonitor.java打交道
</pre>
<p>WifiMonitor作用：接收wpa_supplicant传输过来的各种wifi状态变化，扫描结果等
</p><p>代码调用路径：
</p><p>frameworks/base/wifi/java/android/net/wifi/WifiMonitor.java------&gt;函数调用waitForEvent()
</p>
<pre>       public void run() {
          
           for (;;) {
</pre>
<pre>               String eventStr = mWifiNative.waitForEvent();
</pre>
<p>		....
		....
</p><p>		}
	...
	...
</p><p>	}
</p><p>frameworks/base/wifi/java/android/net/wifi/WifiNative.java------&gt; waitForEvent()函数调用waitForEventNative（）
</p>
<pre>   public String waitForEvent() {
</pre>
<pre>       // No synchronization necessary .. it is implemented in WifiMonitor
</pre>
<pre>       ///M: modify
</pre>
<pre>       return waitForEventNative(mInterfaceName);
</pre>
<pre>   }
</pre>
<p>frameworks/base/core/jni/android_net_wifi_WifiNative.cpp ------&gt; JNI 映射到android_net_wifi_waitForEvent
</p><p>static JNINativeMethod gWifiMethods[] = {
</p>
<pre>   /* name, signature, funcPtr */
</pre>
<p>	...
	...
</p>
<pre>   { "waitForEventNative", "(Ljava/lang/String;)Ljava/lang/String;", (void*)android_net_wifi_waitForEvent },
</pre>
<pre>	...
</pre>
<p>	...
</p><p>};
</p><p>frameworks/base/core/jni/android_net_wifi_WifiNative.cpp ------&gt; android_net_wifi_waitForEvent（）调用wifi_wait_for_event（）
</p><p>hardware/libhardware_legacy/wifi/wifi.c ------&gt; wifi_wait_for_event（）调用wifi_wait_on_socket（）
</p><p>int wifi_wait_for_event(char *buf, size_t buflen)
</p><p>{
</p>
<pre>   return wifi_wait_on_socket(buf, buflen);
</pre>
<p>}
</p><p>hardware/libhardware_legacy/wifi/wifi.c ------&gt; wifi_wait_on_socket（）调用wifi_ctrl_recv（）
</p><p>int wifi_wait_on_socket(char *buf, size_t buflen)
</p><p>{
	...
	...
</p>
<pre>   if (monitor_conn == NULL) {
</pre>
<pre>       return snprintf(buf, buflen, WPA_EVENT_TERMINATING " - connection closed");
</pre>
<pre>   }
</pre>
<pre>   result = wifi_ctrl_recv(buf, &amp;nread);
</pre>
<p>	...
	...
}
</p><p>hardware/libhardware_legacy/wifi/wifi.c ------&gt; wifi_ctrl_recv（）调用wpa_ctrl_recv（）
</p><p>int wifi_ctrl_recv(char *reply, size_t *reply_len)
</p><p>{
</p>
<pre>       ...
</pre>
<p>	...
</p>
<pre>       int ctrlfd = wpa_ctrl_get_fd(monitor_conn);
</pre>
<p>	...
	...
</p>
<pre>   if (rfds[0].revents &amp; POLLIN) {
</pre>
<pre>       return wpa_ctrl_recv(monitor_conn, reply, reply_len);
</pre>
<pre>   }
</pre>
<p>	...
	...
}
</p><p>总结：对上调用枢纽：一个socket---monitor_conn,一个socket---ctrl_conn一个wpa_supplicant共享库函数---wpa_ctrl_recv（）
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=8" title="编辑段落：第三章：对下接口">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.B8.89.E7.AB.A0.EF.BC.9A.E5.AF.B9.E4.B8.8B.E6.8E.A5.E5.8F.A3"> <b>第三章：对下接口</b> </span></h2>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=9" title="编辑段落：A：socket for ioctl">编辑</a>]</span> <span class="mw-headline" id="A.EF.BC.9Asocket_for_ioctl"> <b>A：socket for ioctl </b></span></h3>
<p>作用：发送命令到kernel space
</p><p>与kernel space交互的API已经和kernel user space 挂接的API实现：external/wpa_supplicant_8/src/drivers/linux_ioctl.c
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=10" title="编辑段落：B：netlink">编辑</a>]</span> <span class="mw-headline" id="B.EF.BC.9Anetlink"> <b>B：netlink</b></span></h3>
<p>作用：接受kernel发送上来的event
</p><p>与kernel space交互的API已经和kernel user space 挂接的API实现：external/wpa_supplicant_8/src/drivers/netlink.c
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=11" title="编辑段落：C：PF PACKET">编辑</a>]</span> <span class="mw-headline" id="C.EF.BC.9APF_PACKET"> <b>C：PF_PACKET </b></span></h3>
<p>作用：处理802.1x报文
</p><p>与kernel space交互的API已经和kernel user space 挂接的API实现：/external/wpa_supplicant_8/src/l2_packet/l2_packet_linux.c
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=12" title="编辑段落：第四章：wpa supplicant内部事物处理重要loop函数简介">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E5.9B.9B.E7.AB.A0.EF.BC.9Awpa_supplicant.E5.86.85.E9.83.A8.E4.BA.8B.E7.89.A9.E5.A4.84.E7.90.86.E9.87.8D.E8.A6.81loop.E5.87.BD.E6.95.B0.E7.AE.80.E4.BB.8B"> <b>第四章：wpa_supplicant内部事物处理重要loop函数简介</b> </span></h2>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=13" title="编辑段落：A：loop作用">编辑</a>]</span> <span class="mw-headline" id="A.EF.BC.9Aloop.E4.BD.9C.E7.94.A8"> <b>A：loop作用 </b></span></h3>
<p>wpa_supplicant配置完配置文件后(第五章将会讲解如何配置)，就会进入一个very important的循环函数 eloop_run()
</p><p>作用：前面第二章和第三章讲解的5个接口都会通过注册或者回调的机制挂载在loop循环中，通过loop循环来处理各种事件。
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=14" title="编辑段落：B：code 流程">编辑</a>]</span> <span class="mw-headline" id="B.EF.BC.9Acode_.E6.B5.81.E7.A8.8B"> <b>B：code 流程 </b></span></h3>
<p>wpa_supplicant 进入loop函数流程：
</p><p>wpa_supplicant_8/wpa_supplicant/main.c ------&gt;main()调用wpa_supplicant_init（）
</p><p>int main(int argc, char *argv[])
</p><p>{
	...
	...
</p><p>	if (exitcode == 0)
</p><p>		exitcode = wpa_supplicant_run(global);
</p><p>	...
	...
</p><p>}
</p><p>external/wpa_supplicant_8/wpa_supplicant/wpa_supplicant.c ------&gt; wpa_supplicant_run()调用eloop_run（）
</p><p>int wpa_supplicant_run(struct wpa_global *global)
</p><p>{
	...
	...
</p><p>	eloop_run();
</p><p>	return 0;
</p><p>}
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=15" title="编辑段落：第五章：android端相关">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.BA.94.E7.AB.A0.EF.BC.9Aandroid.E7.AB.AF.E7.9B.B8.E5.85.B3"> <b>第五章：android端相关</b> </span></h2>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=16" title="编辑段落：A： service">编辑</a>]</span> <span class="mw-headline" id="A.EF.BC.9A_service"> <b>A： service </b></span></h3>
<h4><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=17" title="编辑段落：*： service的建立">编辑</a>]</span> <span class="mw-headline" id=".2A.EF.BC.9A_service.E7.9A.84.E5.BB.BA.E7.AB.8B"> <b>*： service的建立 </b></span></h4>
<p>android wap_supplicant service的建立一般是在 *.rc:
</p><p>例如：
</p><p>service wpa_supplicant /system/bin/wpa_supplicant \
</p><p>	-iwlan0 -Dnl80211 -c/data/misc/wifi/wpa_supplicant.conf -e/data/misc/wifi/entropy.bin -ddd \
</p><p>	-I/system/etc/wifi/wpa_supplicant_overlay.conf \
</p><p>	-O/data/misc/wifi/sockets -g@android:wpa_wlan0
</p><p>	class main
</p><p>	socket wpa_wlan0 dgram 660 wifi wifi
</p><p>	disabled
</p><p>	oneshot
</p>
<h4><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=18" title="编辑段落：*： service的调度">编辑</a>]</span> <span class="mw-headline" id=".2A.EF.BC.9A_service.E7.9A.84.E8.B0.83.E5.BA.A6"> <b>*： service的调度 </b></span></h4>
<p>在android *.rc中只是建立了一个service但是默认是disable的，只有需要运行wifi STA模式（常见的wifi enable）的时候才会enable这个服务;
</p><p>下面列出这个service的enable的过程，（disable过程类似）
</p><p>frameworks/base/wifi/java/android/net/wifi/WifiStateMachine.java ------&gt;setSupplicantRunning()接受enable command
</p>
<pre>   public void setSupplicantRunning(boolean enable) {
</pre>
<pre>       if (enable) {
</pre>
<pre>           sendMessage(CMD_START_SUPPLICANT);
</pre>
<pre>       } else {
</pre>
<pre>           sendMessage(CMD_STOP_SUPPLICANT);
</pre>
<pre>       }
</pre>
<pre>   }
</pre>
<p>frameworks/base/wifi/java/android/net/wifi/WifiStateMachine.java ------&gt;processMessage() 函数接受setSupplicantRunning发送过来的CMD_START_SUPPLICANT 消息
</p>
<pre>           switch (message.what) {
</pre>
<pre>               case CMD_START_SUPPLICANT:
</pre>
<p>			....
</p><p>			....
</p>
<pre>                     if(mWifiNative.startSupplicant(mP2pSupported)) 
</pre>
<p>			....
</p><p>			....
</p><p>}
</p><p>frameworks/base/core/jni/android_net_wifi_WifiNative.cpp ------&gt; JNI映射
</p><p>static JNINativeMethod gWifiMethods[] = {
</p>
<pre>   /* name, signature, funcPtr */
</pre>
<p>	...
</p><p>	...
</p>
<pre>   { "startSupplicant", "(Z)Z",  (void *)android_net_wifi_startSupplicant },
</pre>
<p>	...
</p><p>	...
</p><p>}
</p><p>frameworks/base/core/jni/android_net_wifi_WifiNative.cpp ------&gt; android_net_wifi_startSupplicant调用wifi_start_supplicant()
</p><p>static jboolean android_net_wifi_startSupplicant(JNIEnv* env, jobject, jboolean p2pSupported)
</p><p>{
</p>
<pre>   return (::wifi_start_supplicant(p2pSupported) == 0);
</pre>
<p>}
</p><p>hardware/libhardware_legacy/wifi/wifi.c -------&gt; wifi_start_supplicant()中调度enable init.rc中建立的 wpa_supplicent服务
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=19" title="编辑段落：B：wpa supplicant.conf">编辑</a>]</span> <span class="mw-headline" id="B.EF.BC.9Awpa_supplicant.conf"> <b>B：wpa_supplicant.conf</b></span></h3>
<p>我们在上一小节中有看到建立wpa_supplicat 的时候，给了不少参数，那么这些参数分别表示什么意思呢？
</p><p>简单介绍如下几个：
</p><p>-i&lt;ifname&gt;&nbsp;: 网络接口名称 
</p><p>-c&lt;conf&gt;: 配置文件名称
</p><p>-C&lt;ctrl_intf&gt;: 控制接口名称
</p><p>-D&lt;driver&gt;: 驱动类型
</p><p>-p&lt;driver_param&gt;: 驱动参数
</p><p>-b&lt;br_ifname&gt;: 桥接口名称
</p><p>这些参数是在哪里被配置的呢？看代码
</p><p>wpa_supplicant_8/wpa_supplicant/main.c -------&gt; main()
</p><p>int main(int argc, char *argv[])
</p><p>{
</p><p>	....
	....
</p><p>	for (;;) {
</p><p>		c = getopt(argc, argv,
</p><p>			   "b:Bc:C:D:de:f:g:G:hi:I:KLNo:O:p:P:qsTtuvW");
</p><p>		if (c &lt; 0)
</p><p>			break;
</p><p>		switch (c) {
</p><p>		case 'b':
</p><p>			iface-&gt;bridge_ifname = optarg;
</p><p>			break;
</p><p>		case 'B':
</p><p>			params.daemonize++;
</p><p>			break;
</p><p>		case 'c':
</p><p>			iface-&gt;confname = optarg;
</p><p>			break;
</p><p>		case 'C':
</p><p>			iface-&gt;ctrl_interface = optarg;
</p><p>			break;
</p><p>		case 'D':
</p><p>			iface-&gt;driver = optarg;
</p><p>			break;
</p><p>		case 'd':
</p>
<ol><li>ifdef CONFIG_NO_STDOUT_DEBUG
</li></ol>
<p>			printf("Debugging disabled with "
</p><p>			       "CONFIG_NO_STDOUT_DEBUG=y build time "
</p><p>			       "option.\n");
</p><p>			goto out;
</p>
<ol><li>else /* CONFIG_NO_STDOUT_DEBUG */
</li></ol>
<p>			params.wpa_debug_level--;
</p><p>			break;
</p>
<ol><li>endif /* CONFIG_NO_STDOUT_DEBUG */
</li></ol>
<p>		case 'e':
</p><p>			params.entropy_file = optarg;
</p><p>			break;
</p>
<ol><li>ifdef CONFIG_DEBUG_FILE
</li></ol>
<p>		case 'f':
</p><p>			params.wpa_debug_file_path = optarg;
</p><p>			break;
</p>
<ol><li>endif /* CONFIG_DEBUG_FILE */
</li></ol>
<p>		case 'g':
</p><p>			params.ctrl_interface = optarg;
</p><p>			break;
</p><p>		case 'G':
</p><p>			params.ctrl_interface_group = optarg;
</p><p>			break;
</p><p>		case 'h':
</p><p>			usage();
</p><p>			exitcode = 0;
</p><p>			goto out;
</p><p>		case 'i':
</p><p>			iface-&gt;ifname = optarg;
</p><p>			break;
</p><p>		case 'I':
</p><p>			iface-&gt;confanother = optarg;
</p><p>			break;
</p><p>		case 'K':
</p><p>			params.wpa_debug_show_keys++;
</p><p>			break;
</p><p>		case 'L':
</p><p>			license();
</p><p>			exitcode = 0;
</p><p>			goto out;
</p><p>		case 'o':
</p><p>			params.override_driver = optarg;
</p><p>			break;
</p><p>		case 'O':
</p><p>			params.override_ctrl_interface = optarg;
</p><p>			break;
</p><p>		case 'p':
</p><p>			iface-&gt;driver_param = optarg;
</p><p>			break;
</p><p>		case 'P':
</p><p>			os_free(params.pid_file);
</p><p>			params.pid_file = os_rel2abs_path(optarg);
</p><p>			break;
</p><p>		case 'q':
</p><p>			params.wpa_debug_level++;
</p><p>			break;
</p>
<ol><li>ifdef CONFIG_DEBUG_SYSLOG
</li></ol>
<p>		case 's':
</p><p>			params.wpa_debug_syslog++;
</p><p>			break;
</p>
<ol><li>endif /* CONFIG_DEBUG_SYSLOG */
</li></ol>
<ol><li>ifdef CONFIG_DEBUG_LINUX_TRACING
</li></ol>
<p>		case 'T':
</p><p>			params.wpa_debug_tracing++;
</p><p>			break;
</p>
<ol><li>endif /* CONFIG_DEBUG_LINUX_TRACING */
</li></ol>
<p>		case 't':
</p><p>			params.wpa_debug_timestamp++;
</p><p>			break;
</p>
<ol><li>ifdef CONFIG_DBUS
</li></ol>
<p>		case 'u':
</p><p>			params.dbus_ctrl_interface = 1;
</p><p>			break;
</p>
<ol><li>endif /* CONFIG_DBUS */
</li></ol>
<p>		case 'v':
</p><p>			printf("%s\n", wpa_supplicant_version);
</p><p>			exitcode = 0;
</p><p>			goto out;
</p><p>		case 'W':
</p><p>			params.wait_for_monitor++;
</p><p>			break;
</p><p>		case 'N':
</p><p>	....
	....
</p><p>}
一目了然，其他的接口含义可以参看帮助函数：
</p><p>wpa_supplicant_8/wpa_supplicant/main.c-------&gt; usage()函数，
</p><p>或者在adb shell 中运行wpa_supplicant 命令获得
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=20" title="编辑段落：第六章：结束语">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E5.85.AD.E7.AB.A0.EF.BC.9A.E7.BB.93.E6.9D.9F.E8.AF.AD"> <b>第六章：结束语</b> </span></h2>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=21" title="编辑段落：A：supplicant架构图">编辑</a>]</span> <span class="mw-headline" id="A.EF.BC.9Asupplicant.E6.9E.B6.E6.9E.84.E5.9B.BE"> <b>A：supplicant架构图</b></span></h3>
<p><a href="http://10.120.10.100:9002/index.php/File:Framwork_supplicant.jpg" class="image"><img alt="Framwork supplicant.jpg" src="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/Framwork_supplicant.jpg" width="968" height="672"></a>
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&section=22" title="编辑段落：B：more reference">编辑</a>]</span> <span class="mw-headline" id="B.EF.BC.9Amore_reference"> <b>B：more reference</b></span></h3>
<p>wpa_supplicent更多的学习可以参考：
</p><p>1：<a rel="nofollow" class="external free" href="http://hostap.epitest.fi/wpa_supplicant/devel/">http://hostap.epitest.fi/wpa_supplicant/devel/</a>
</p><p>2：了解文件external/wpa_supplicant_8/wpa_supplicant/defconfig中的含义
</p><p>3：man -8 wpa_supplicant
</p><p><a href="http://10.120.10.100:9002/index.php/Qualcomm_Platform_Cases" title="Qualcomm Platform Cases">返回</a>
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 89/1000000
Preprocessor generated node count: 96/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:22708-0!*!0!!zh-cn!2!* and timestamp 20141225062835 -->
</div><div class="printfooter">
来自“<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&oldid=130758">http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(一)&amp;oldid=130758</a>”</div>
		<div id="catlinks" class="catlinks catlinks-allhidden"></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one" lang="zh-CN" dir="ltr">
	<div id="p-cactions" class="portlet">
		<h5>查看</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki.html" primary="1" context="subject" title="查看内容页面 [alt-c]" accesskey="c">页面</a></li>
				<li id="ca-talk" class="new"><a href="http://10.120.10.100:9002/index.php?title=Talk:AOSP_Android4.4_wifi(%E4%B8%80)&action=edit&redlink=1" primary="1" context="talk" title="有关内容页面的讨论 [alt-t]" accesskey="t">讨论</a></li>
				<li id="ca-edit"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=edit" primary="1" title="你可以编辑本页面。请在保存前使用预览按钮。 [alt-e]" accesskey="e">编辑</a></li>
				<li id="ca-history"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=history" rel="archives" title="本页面过去的版本 [alt-h]" accesskey="h">历史</a></li>
				<li id="ca-move"><a href="http://10.120.10.100:9002/index.php/Special:MovePage/AOSP_Android4.4_wifi(%E4%B8%80)" title="移动本页 [alt-m]" accesskey="m">移动</a></li>
				<li id="ca-watch"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&action=watch&token=8500584c67f70dd0b3e36c2cd9c250c0%2B%5C" title="添加本页面至你的监视列表 [alt-w]" accesskey="w">监视</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>个人工具</h5>
		<div class="pBody">
			<ul lang="zh-CN" dir="ltr">
				<li id="pt-userpage"><a href="http://10.120.10.100:9002/index.php/User:Haolong.zhang" class="new" title="你的用户页面 [alt-.]" accesskey=".">Haolong.zhang</a></li>
				<li id="pt-mytalk"><a href="http://10.120.10.100:9002/index.php/User_talk:Haolong.zhang" class="new" title="你的讨论页面 [alt-n]" accesskey="n">我的讨论页</a></li>
				<li id="pt-preferences"><a href="http://10.120.10.100:9002/index.php/Special:Preferences" title="你的系统设置">系统设置</a></li>
				<li id="pt-watchlist"><a href="http://10.120.10.100:9002/index.php/Special:Watchlist" title="你正在监视更改的页面的列表 [alt-l]" accesskey="l">监视列表</a></li>
				<li id="pt-mycontris"><a href="http://10.120.10.100:9002/index.php/Special:Contributions/Haolong.zhang" title="你的贡献列表 [alt-y]" accesskey="y">贡献</a></li>
				<li id="pt-logout"><a href="http://10.120.10.100:9002/index.php?title=Special:UserLogout&returnto=AOSP+Android4.4+wifi%28%E4%B8%80%29" title="退出登录">退出</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
<a href="http://10.120.10.100:9002/index.php/Main_Page" style="background-image: url(/cklogo.jpg);" title="访问首页"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>导航</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage-description"><a href="http://10.120.10.100:9002/index.php/Main_Page" title="访问首页 [alt-z]" accesskey="z">首页</a></li>
				<li id="n-help"><a href="http://10.120.10.100:9002/index.php/Help:Contents" title="查找帮助的地方">帮助</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-Team_Entry">
		<h5>Team Entry</h5>
		<div class="pBody">
			<ul>
				<li id="n-FeaturePhone"><a href="http://10.120.10.100:9002/index.php/FP_Technical_Material">FeaturePhone</a></li>
				<li id="n-SmartPhone"><a href="http://10.120.10.100:9002/index.php/SP_Technical_Material">SmartPhone</a></li>
				<li id="n-HW"><a href="http://10.120.10.100:9002/index.php/HW_Technical_Material">HW</a></li>
				<li id="n-Testing"><a href="http://10.120.10.100:9002/index.php/Test_Technical_Material">Testing</a></li>
				<li id="n-QA"><a href="http://10.120.10.100:9002/index.php/Test_QA_Area">QA</a></li>
				<li id="n-OfficialWebsite"><a href="http://10.120.10.100:9002/index.php/Official_website">OfficialWebsite</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">搜索</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://10.120.10.100:9002/index.php" id="searchform">
				<input type="hidden" name="title" value="Special:Search">
				<input type="search" name="search" title="在CKT_Chengdu_Wiki中搜索 [alt-f]" accesskey="f" id="searchInput" autocomplete="off" placeholder="搜索">
				<input type="submit" name="go" value="提交" title="如果相同的标题存在的话便直接前往该页面" id="searchGoButton" class="searchButton">&nbsp;
				<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton">
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>工具箱</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="http://10.120.10.100:9002/index.php/Special:WhatLinksHere/AOSP_Android4.4_wifi(%E4%B8%80)" title="所有链入本页的wiki页面列表 [alt-j]" accesskey="j">链入页面</a></li>
				<li id="t-recentchangeslinked"><a href="http://10.120.10.100:9002/index.php/Special:RecentChangesLinked/AOSP_Android4.4_wifi(%E4%B8%80)" title="本页链入的页面的最近更改 [alt-k]" accesskey="k">相关更改</a></li>
				<li id="t-upload"><a href="http://10.120.10.100:9002/index.php/Special:Upload" title="上传文件 [alt-u]" accesskey="u">上传文件</a></li>
				<li id="t-specialpages"><a href="http://10.120.10.100:9002/index.php/Special:SpecialPages" title="所有特殊页面的列表 [alt-q]" accesskey="q">特殊页面</a></li>
				<li id="t-print"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&printable=yes" rel="alternate" title="本页面的可打印版本 [alt-p]" accesskey="p">打印版本</a></li>
				<li id="t-permalink"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%B8%80)&oldid=130758" title="本页面该版本的永久链接">永久链接</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" lang="zh-CN" dir="ltr">
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31"></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> 本页面最后修改于2014年12月25日 (星期四) 06:04。</li>
		<li id="viewcount">此页面已被浏览过51次。</li>
		<li id="privacy"><a href="http://10.120.10.100:9002/index.php/CKT_Chengdu_Wiki:Privacy_policy" title="CKT Chengdu Wiki:Privacy policy">隐私权政策</a></li>
		<li id="about"><a href="http://10.120.10.100:9002/index.php/CKT_Chengdu_Wiki:About" title="CKT Chengdu Wiki:About">关于CKT_Chengdu_Wiki</a></li>
		<li id="disclaimer"><a href="http://10.120.10.100:9002/index.php/CKT_Chengdu_Wiki:General_disclaimer" title="CKT Chengdu Wiki:General disclaimer">免责声明</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"loading"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","mediawiki.page.watch.ajax","mediawiki.searchSuggest"], null, true);
}</script><script src="./AOSP Android4.4 wifi(一) - CKT_Chengdu_Wiki_files/load(3).php" type="text/javascript"></script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<script>if(window.mw){
mw.loader.state({"user.groups":"ready"});
}</script>
<!-- Served in 0.501 secs. --><div class="suggestions" style="display: none; font-size: 12px;"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body></html>