<!DOCTYPE html>
<!-- saved from url=(0060)http://10.120.10.100:9002/Enable_PStore_for_Kernel_Debugging -->
<html lang="zh-CN" dir="ltr" class="client-js ve-available"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>Enable PStore for Kernel Debugging - CKT成都维基</title>
<meta name="generator" content="MediaWiki 1.26alpha">
<link rel="shortcut icon" href="http://10.120.10.100:9002/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="http://10.120.10.100:9002/opensearch_desc.php" title="CKT成都维基 (zh-cn)">
<link rel="EditURI" type="application/rsd+xml" href="http://10.120.10.100:9002/api.php?action=rsd">
<link rel="alternate" hreflang="x-default" href="./Enable PStore for Kernel Debugging - CKT成都维基_files/Enable PStore for Kernel Debugging - CKT成都维基.html">
<link rel="alternate" type="application/atom+xml" title="CKT成都维基的Atom feed" href="http://10.120.10.100:9002/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&feed=atom">
<link rel="stylesheet" href="http://10.120.10.100:9002/load.php?debug=false&lang=zh-cn&modules=ext.uls.nojs%7Cext.visualEditor.viewPageTarget.noscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&only=styles&skin=vector&*">
<style>
.tipsy{padding:5px;position:absolute;z-index:100000;cursor:default}.tipsy-inner{padding:5px 8px 4px 8px; background-color:#ffffff;border:solid 1px #a7d7f9;color:black;max-width:15em;border-radius:4px; }.tipsy-arrow{position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALAgMAAADUwp+1AAAACVBMVEX5+fmn1/n///9s6BFKAAAAAXRSTlMAQObYZgAAACpJREFUCB1jZBD4wMiQMoeRcUU4I9uSaYxSE54xZjn8AtMgPkgcJA9UBwAeDw1Qrb3pVAAAAABJRU5ErkJggg==) no-repeat top left;background:url(/resources/src/jquery.tipsy/images/tipsy.png?2015-04-28T09:50:00Z) no-repeat top left!ie;width:11px;height:6px} .tipsy-n .tipsy-arrow{top:0px;left:50%;margin-left:-5px} .tipsy-nw .tipsy-arrow{top:1px;left:10px} .tipsy-ne .tipsy-arrow{top:1px;right:10px} .tipsy-s .tipsy-arrow{bottom:0px;left:50%;margin-left:-5px;background-position:bottom left} .tipsy-sw .tipsy-arrow{bottom:0px;left:10px;background-position:bottom left} .tipsy-se .tipsy-arrow{bottom:0px;right:10px;background-position:bottom left} .tipsy-e .tipsy-arrow{top:50%;margin-top:-5px;right:1px;width:5px;height:11px;background-position:top right} .tipsy-w .tipsy-arrow{top:50%;margin-top:-5px;left:0px;width:6px;height:11px} .tipsy{font-size:0.8em}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:79ce17bf567c55c927fecf9125ea99a6 */
.uls-menu a{cursor:pointer}.uls-menu.callout .caret-before{border-top:20px solid transparent;border-right:20px solid #C9C9C9;border-bottom:20px solid transparent;display:inline-block;left:-21px;top:30px;position:absolute}.uls-menu.callout .caret-after{border-top:20px solid transparent;border-right:20px solid #FCFCFC;border-bottom:20px solid transparent;display:inline-block;left:-20px;top:30px;position:absolute}.uls-ui-languages button{width:23%;text-overflow:ellipsis;margin-right:4%}button.uls-more-languages{width:auto}.settings-title{font-size:11pt}.settings-text{color:#555555;font-size:9pt}div.display-settings-block:hover .settings-text{color:#252525}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:22d1681fa868b4ff4fbcb1ec1e58a9ea */
.ve-activated #toc,.ve-activated #siteNotice,.ve-activated .mw-indicators, .ve-active #bodyContent > :not(#siteSub):not(#contentSub):not(.ve-ui-mwTocWidget),.ve-activated #t-print,.ve-activated #t-permalink,.ve-activated #p-coll-print_export,.ve-activated #t-cite,.ve-activating .ve-ui-surface,.ve-deactivating .ve-ui-surface{display:none}.ve-activated #bodyContent,.ve-activated #firstHeading,.ve-activated #siteSub,.ve-activated #contentSub{opacity:0.6;pointer-events:none}.ve-activated #firstHeading{cursor:default} .ve-activated #content{position:relative}.ve-init-mw-viewPageTarget-loading-overlay{position:absolute;left:0;right:0;z-index:1;margin-top:-0.5em}.ve-init-mw-viewPageTarget-progress{border:1px solid #347bff;background:#fff;height:0.75em;border-radius:2px;overflow:hidden;margin:0 25%}.ve-init-mw-viewPageTarget-progress-bar{width:0;height:0.75em;background:#347bff} .mw-editsection{white-space:nowrap; unicode-bidi:-moz-isolate;unicode-bidi:-webkit-isolate;unicode-bidi:isolate}.mw-editsection-divider{color:#555}.ve-tabmessage-appendix{font-size:0.7em;vertical-align:top;line-height:1.43em;padding-left:0.5em; background-image:none !important;display:inline !important}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:98428ddb6d82ef9bb6dcf1d1c4437f25 */</style><style>
.uls-trigger{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAQCAMAAADQzfSkAAABqlBMVEX////f3/+Ov+/n5+fp6enp6eno6Ojp6enn5+ff39/q6urp6enp6enp6enq6urp6en////q6urr6+upv+rU1NTJycnR0dEaGhrp6enT4/SEuuK9vb3l5eU2ktCxsbFdXV1paWmzwc9ITFDo6OhaWlpsbGxtbW2BipSZpK/X19d2dnZ8hI2/v79PT09gZm2CgoLIyMjD0eGksL1JTVHM2+spKywnKCkcHBzAzt3I1+cxMzZxcXFkZGSvr69WW2C8vLyFjphqcXiLlZ8dHh4gISLa2trQ3/Dc3NzZ2dl7e3uioqIfHyBCRko9QEPh4eFgYGDGxsZoaGiPj4/Ly8uRm6a6yNcbGxuSnKfL2uqVn6scHR20tLR/f3+Kioq4uLienp54gIipqanA2e+71u9GSk5yeoKgoKCAgIB0dHRLS0tlZWWDg4PBwcHFxcWxvsxkanGapbCKlJ7O4fNXo9hQn9bM3/OPmaRfZWve3t6mpqbR0dG+vr6JiYnKyspPVFl1s99+fn5srdzm5ubNzc1BREh2s99xsN7S0tIxMzUiIyQ2OTt/iJFwcHBbYWc3S28lAAAAF3RSTlMACBAg7P3LiTYIX6LmmDzeAYMnDN+1MJx17ncAAAEQSURBVHheddBTb0VREIbhVduYWVuHRm3btm3bNv9zJ2v3IE36Xk3yZG4+xkMKw0BREYwJMzkcO38MY37tG6AmYN48YZFxwsbeiys6y/02rT1Wa4TxwoYgpx4adLMbfRubs9tk0cJuYK8ACv1/Xy5LLlIYS5bf2FTUUlJapptiqKwyuOfJEsjq4M3j+YBPYc02X6utTWnvQEwk6wJRNxn29Pb1D2iIg0bEJMaHYWTU6RyfABPZ5BTa7xBxxo2YzPgcPPGFRb4Ey2Qrq2vrXlRk6xampDK+a94/ODw6PjGfkp2dX1y6ZOvVNWKavsutqt6HbGZ5QCqdMUmSnlXqhY6M12CZtKcaUnhtsKz/Tc5m7AfjN0jzWIipawAAAABJRU5ErkJggg==) no-repeat scroll left center;background:transparent url(http://10.120.10.100:9002/extensions/UniversalLanguageSelector/resources/css/../../lib/jquery.uls/images/icon-language.png?2015-04-24T18:11:40Z) no-repeat scroll left center!ie;background-image:-webkit-linear-gradient(transparent,transparent),url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2227%22%20height%3D%2216%22%3E%3Cpath%20fill%3D%22%23D3E3F4%22%20d%3D%22M0%200h11.876v16h-11.876v-16z%22%2F%3E%3Cpath%20fill%3D%22%23E9E9E9%22%20d%3D%22M12.819%200v15.969h10.755c1.085-2.578%201.837-4.991%203.062-8.591l-3.062-7.378h-10.755z%22%2F%3E%3Cpath%20fill%3D%22%23434343%22%20d%3D%22M14.828%204.146c.32.023.639.035.951.035.471%200%20.922-.016%201.354-.046l.023-.258.034-.367.081-.711.033-.333.873.058c-.073.577-.133%201.091-.179%201.542%201.116-.119%202.233-.331%203.349-.637l.092.809c-1.078.271-2.251.472-3.521.602-.05.463-.082.968-.098%201.514.524-.187%201.14-.313%201.847-.378.064-.207.136-.461.213-.763l.865.201c-.027.123-.088.315-.184.579.814.104%201.461.34%201.938.711.681.542%201.021%201.252%201.021%202.128%200%20.963-.406%201.746-1.221%202.351-.635.47-1.505.784-2.609.94l-.505-.779c.968-.104%201.739-.337%202.317-.7.733-.458%201.101-1.066%201.101-1.823%200-.772-.341-1.363-1.021-1.772-.345-.21-.764-.344-1.256-.401-.604%201.422-1.4%202.598-2.387%203.527.035.352.102.715.201%201.09l-.849.314-.126-.773c-.654.462-1.27.693-1.847.693-.696%200-1.044-.407-1.044-1.222%200-1.104.591-2.103%201.771-2.993.227-.165.532-.352.918-.562.012-.524.046-1.128.104-1.812-.585.046-1.143.069-1.675.069l-.493-.011-.071-.822m2.127%203.384c-.268.161-.545.392-.831.694-.612.619-.94%201.226-.986%201.817l-.017.121.017.138c0%20.252.112.378.339.378.492%200%201.02-.258%201.582-.773-.057-.613-.092-1.404-.104-2.375m2.455-.884c-.57.08-1.111.226-1.623.436%200%20.883.018%201.581.052%202.093.634-.707%201.158-1.55%201.571-2.529%22%2F%3E%3Cpath%20fill%3D%22%231A1A1A%22%20d%3D%22M8.517%2011.735l-.734-2.409h-3.69l-.734%202.409h-2.313l3.573-10.165h2.625l3.587%2010.165h-2.314m-1.246-4.21c-.679-2.183-1.062-3.418-1.149-3.704-.083-.286-.143-.512-.18-.678-.153.59-.589%202.051-1.309%204.382h2.638%22%2F%3E%3Cpath%20fill%3D%22%23BCBCBC%22%20d%3D%22M12.817%2013.5v2.5h10.757l.98-2.5h-11.737z%22%2F%3E%3Cpath%20fill%3D%22%233692D0%22%20d%3D%22M.011%2013.511h3.569l2.367-3.116%202.367%203.116h3.57v2.484h-11.873v-2.484z%22%2F%3E%3C%2Fsvg%3E);background-image:-webkit-linear-gradient(transparent,transparent),url(http://10.120.10.100:9002/extensions/UniversalLanguageSelector/resources/css/../../lib/jquery.uls/images/icon-language.svg?2015-04-24T18:11:40Z)!ie;background-image:linear-gradient(transparent,transparent),url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2227%22%20height%3D%2216%22%3E%3Cpath%20fill%3D%22%23D3E3F4%22%20d%3D%22M0%200h11.876v16h-11.876v-16z%22%2F%3E%3Cpath%20fill%3D%22%23E9E9E9%22%20d%3D%22M12.819%200v15.969h10.755c1.085-2.578%201.837-4.991%203.062-8.591l-3.062-7.378h-10.755z%22%2F%3E%3Cpath%20fill%3D%22%23434343%22%20d%3D%22M14.828%204.146c.32.023.639.035.951.035.471%200%20.922-.016%201.354-.046l.023-.258.034-.367.081-.711.033-.333.873.058c-.073.577-.133%201.091-.179%201.542%201.116-.119%202.233-.331%203.349-.637l.092.809c-1.078.271-2.251.472-3.521.602-.05.463-.082.968-.098%201.514.524-.187%201.14-.313%201.847-.378.064-.207.136-.461.213-.763l.865.201c-.027.123-.088.315-.184.579.814.104%201.461.34%201.938.711.681.542%201.021%201.252%201.021%202.128%200%20.963-.406%201.746-1.221%202.351-.635.47-1.505.784-2.609.94l-.505-.779c.968-.104%201.739-.337%202.317-.7.733-.458%201.101-1.066%201.101-1.823%200-.772-.341-1.363-1.021-1.772-.345-.21-.764-.344-1.256-.401-.604%201.422-1.4%202.598-2.387%203.527.035.352.102.715.201%201.09l-.849.314-.126-.773c-.654.462-1.27.693-1.847.693-.696%200-1.044-.407-1.044-1.222%200-1.104.591-2.103%201.771-2.993.227-.165.532-.352.918-.562.012-.524.046-1.128.104-1.812-.585.046-1.143.069-1.675.069l-.493-.011-.071-.822m2.127%203.384c-.268.161-.545.392-.831.694-.612.619-.94%201.226-.986%201.817l-.017.121.017.138c0%20.252.112.378.339.378.492%200%201.02-.258%201.582-.773-.057-.613-.092-1.404-.104-2.375m2.455-.884c-.57.08-1.111.226-1.623.436%200%20.883.018%201.581.052%202.093.634-.707%201.158-1.55%201.571-2.529%22%2F%3E%3Cpath%20fill%3D%22%231A1A1A%22%20d%3D%22M8.517%2011.735l-.734-2.409h-3.69l-.734%202.409h-2.313l3.573-10.165h2.625l3.587%2010.165h-2.314m-1.246-4.21c-.679-2.183-1.062-3.418-1.149-3.704-.083-.286-.143-.512-.18-.678-.153.59-.589%202.051-1.309%204.382h2.638%22%2F%3E%3Cpath%20fill%3D%22%23BCBCBC%22%20d%3D%22M12.817%2013.5v2.5h10.757l.98-2.5h-11.737z%22%2F%3E%3Cpath%20fill%3D%22%233692D0%22%20d%3D%22M.011%2013.511h3.569l2.367-3.116%202.367%203.116h3.57v2.484h-11.873v-2.484z%22%2F%3E%3C%2Fsvg%3E);background-image:linear-gradient(transparent,transparent),url(http://10.120.10.100:9002/extensions/UniversalLanguageSelector/resources/css/../../lib/jquery.uls/images/icon-language.svg?2015-04-24T18:11:40Z)!ie;padding-left:30px}#pt-uls a.uls-trigger{padding-left:30px; line-height:1}   x:-o-prefocus,body.rtl li#pt-uls{ direction:ltr}#uls-settings-block{border-top:1px solid #C9C9C9;background:#f8f8f8;background:-webkit-gradient(linear,left top,left bottom,from(#FBFBFB),to(#F0F0F0));background:-webkit-linear-gradient(top,#FBFBFB,#F0F0F0);background:-moz-linear-gradient(top,#FBFBFB,#F0F0F0);background:-o-linear-gradient(top,#FBFBFB,#F0F0F0);background:linear-gradient(#FBFBFB,#F0F0F0);padding-left:10px;line-height:1.2em;border-radius:0 0 5px 5px}#uls-settings-block div.display-settings-block,#uls-settings-block div.input-settings-block{display:inline-block;margin:8px 15px;color:#565656}#uls-settings-block div.display-settings-block:hover,#uls-settings-block div.input-settings-block:hover{color:#252525}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:5d95b043d28af97341377c3a65192054 */
.mw-collapsible-toggle{float:right;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}  .mw-content-ltr .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr .mw-collapsible-toggle{float:right} .mw-content-rtl .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl .mw-collapsible-toggle{float:left}.mw-customtoggle,.mw-collapsible-toggle{cursor:pointer} caption .mw-collapsible-toggle,.mw-content-ltr caption .mw-collapsible-toggle,.mw-content-rtl caption .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr caption .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl caption .mw-collapsible-toggle{float:none} li .mw-collapsible-toggle,.mw-content-ltr li .mw-collapsible-toggle,.mw-content-rtl li .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr li .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl li .mw-collapsible-toggle{float:none} .mw-collapsible-toggle-li{list-style:none}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:e1ffd603cbaaa5f1a36e0d13fe843535 */
.suggestions{overflow:hidden;position:absolute;top:0;left:0;width:0;border:none;z-index:1099;padding:0;margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0}.suggestions-result{color:black;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left; overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}.suggestions-result-current{background-color:#4C59A6;color:white}.suggestions-special .special-label{color:gray;text-align:left}.suggestions-special .special-query{color:black;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:silver}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:white}.highlight{font-weight:bold}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:f8d0c6895ce3ae14434c16b8fca59432 */
.postedit-container{margin:0 auto;position:fixed;top:0;height:0;left:50%;z-index:1000;font-size:13px}.postedit-container:hover{cursor:pointer}.postedit{position:relative;top:0.6em;left:-50%;padding:.6em 3.6em .6em 1.1em;line-height:1.5625em;color:#626465;background-color:#f4f4f4;border:1px solid #dcd9d9;text-shadow:0 0.0625em 0 rgba(255,255,255,0.5);border-radius:5px;box-shadow:0 2px 5px 0 #ccc;-webkit-transition:all 0.25s ease-in-out;-moz-transition:all 0.25s ease-in-out;-ms-transition:all 0.25s ease-in-out;-o-transition:all 0.25s ease-in-out;transition:all 0.25s ease-in-out}.skin-monobook .postedit{top:6em !important}.postedit-faded{opacity:0}.postedit-icon{padding-left:41px;  line-height:25px;background-repeat:no-repeat;background-position:8px 50%}.postedit-icon-checkmark{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABblBMVEUAAAD///////9PfTf///80aRdTgjn///9Feij///////////9Rfzf///////////9PfjZRgDh1o1xOfTb///////+bwYqLtnj///////9PfTa82K////9WhT6YxIL///9QgDdTgzr////////j7uDl7eLq8efi693k7OH///////9UhjuBr2rp9uRUhjr///9YljVKgir///9WiTlYjT3////9/v57vFlbkT5PjC9dlD/5/fhuq09stUTs9uhxuElctCpfnT1huDFloEZloUZmpENmvDZpvDxpvTxqvjxrvT5rvT9rwTxsqktswD5uwkBvuUdxw0NztFBztU9ztVBzwkp0tlJ1xkd2t1R3uVR4w1F4xk54x014yE15uVZ5v1R5xVB6v1R7yFJ8wVh9xVl9yFR9yVd9ylN+xVh+yFd/x1l/yFeAylmEx1+Ny2uY0Hqe04Wj1Ymv3Ze33qLD47TJ5L3O6cPU7Mrq9eb2+/Q4j37OAAAAQHRSTlMAAQIEBAUFBQwPFB4fJCUoKiosQEhJS01RUlZZXmdydXaChYuSlJSWmJmoq6uur8LExcvM19fg5ejt8fX2+Pr7SljgewAAAKpJREFUGBkFwQNCAwAAAMDLtl3LtrG4rWXbtvX77gAgZ6grFwC0bhwNVgKgdPZx8b0dgLi+s7Wn0VoAqpfOI9+BNADZI7fLrz2pSEwGHZuH+78lSK8ZLkLezF3ooyUG3VPXq2USei9WngeyoG195yBYWDF3E/2pAhl1e9Gr8bGT+bfOFCC2fnvh4X7rcqIAQNNu+HT6sxkAjceTL/2ZAIhv+PorBwBJxfkA//dFHSCBy/UTAAAAAElFTkSuQmCC);background-image:url(/resources/src/mediawiki.action/images/green-checkmark.png?2015-04-28T09:50:00Z)!ie;background-position:left}.postedit-close{position:absolute;padding:0 .8em;right:0;top:0;font-size:1.25em;font-weight:bold;line-height:2.3em;color:black;text-shadow:0 0.0625em 0 white;text-decoration:none;opacity:0.2;filter:alpha(opacity=20)}.postedit-close:hover{color:black;text-decoration:none;opacity:0.4;filter:alpha(opacity=40)}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:128974218162077357b6c8e4a1dd68f0 */</style><style>
.suggestions a.mw-searchSuggest-link,.suggestions a.mw-searchSuggest-link:hover,.suggestions a.mw-searchSuggest-link:active,.suggestions a.mw-searchSuggest-link:focus{color:black;text-decoration:none}.suggestions-result-current a.mw-searchSuggest-link,.suggestions-result-current a.mw-searchSuggest-link:hover,.suggestions-result-current a.mw-searchSuggest-link:active,.suggestions-result-current a.mw-searchSuggest-link:focus{color:white}.suggestions a.mw-searchSuggest-link .special-query{ overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:ae3fa4570b5ac0c6cf7b3776c8ae4d6f */</style><meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikidb_201505:resourceloader:filter:minify-css:7:a651b5ae7d75e5e1f6cbaf858e8cb656 */</style>
<script src="./Enable PStore for Kernel Debugging - CKT成都维基_files/load.php"></script><script src="./Enable PStore for Kernel Debugging - CKT成都维基_files/load(1).php"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Enable_PStore_for_Kernel_Debugging","wgTitle":"Enable PStore for Kernel Debugging","wgCurRevisionId":137410,"wgRevisionId":137410,"wgArticleId":20839,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"zh-cn","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"zh","wgMonthNames":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgMonthNamesShort":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgRelevantPageName":"Enable_PStore_for_Kernel_Debugging","wgRelevantArticleId":20839,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":["zh-cn","zh"],"wgULSCurrentAutonym":"中文（中国大陆）‎","wgVisualEditor":{"pageLanguageCode":"zh-CN","pageLanguageDir":"ltr"}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"zh-cn"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wikidb_201505:resourceloader:filter:minify-js:7:99a23e409e6ef564fa2cb764efae76c2 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","ext.uls.init","ext.uls.interface","ext.visualEditor.viewPageTarget.init","skins.vector.js"]);
}</script><script src="./Enable PStore for Kernel Debugging - CKT成都维基_files/load(2).php"></script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
<style>@font-face { font-family: 'Autonym';
	src: url('/extensions/UniversalLanguageSelector/data/fontrepo/fonts/Autonym/Autonym.eot?version=20131205');
	src: local('Autonym'),		url('/extensions/UniversalLanguageSelector/data/fontrepo/fonts/Autonym/Autonym.woff?version=20131205') format('woff'),		url('/extensions/UniversalLanguageSelector/data/fontrepo/fonts/Autonym/Autonym.ttf?version=20131205') format('truetype');
	font-style: normal;}
</style></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Enable_PStore_for_Kernel_Debugging skin-vector action-view webfonts-changed">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="zh-CN">Enable PStore for Kernel Debugging</h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">来自CKT成都维基</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					跳转至：					<a href="http://10.120.10.100:9002/Enable_PStore_for_Kernel_Debugging#mw-head">导航</a>、					<a href="http://10.120.10.100:9002/Enable_PStore_for_Kernel_Debugging#p-search">搜索</a>
				</div>
				<div id="mw-content-text" lang="zh-CN" dir="ltr" class="mw-content-ltr"><p><a href="http://10.120.10.100:9002/Qualcomm_Platform_Cases" title="Qualcomm Platform Cases">返回上级</a>
</p>
<h2><span class="mw-headline" id="How_to_enable_it"><b>How to enable it</b></span></h2>
<dl><dd>使用过last_kmsg功能的同学都能感受到这个工具带来的便利，但实践发现高通平台（8916/8939）默认没有last_kmsg信息输出，对一些系统死机，重启问题的调查就丢失了一柄方天画JIE（妈蛋，在unbuntu上居然找不到这个字），经过调查发现，高通的solution 00028866介绍了一种新的机制PStore可以替代last_kmsg。</dd>
<dd>solution链接为<a rel="nofollow" class="external free" href="https://qualcomm-cdmatech-support.my.salesforce.com/50130000000VeCAAA0%EF%BC%8C%E5%85%B7%E4%BD%93%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B">https://qualcomm-cdmatech-support.my.salesforce.com/50130000000VeCAAA0，具体内容如下</a></dd></dl>
<pre>    Pstore feature is used to replace last_kmsg feature since kernel 3.10. To enable it, take the below step (test on MSM8916)
*enable below config in kernel config:
CONFIG_PSTORE=y
CONFIG_PSTORE_CONSOLE=y
CONFIG_PSTORE_RAM=y
CONFIG_PSTORE_FTRACE=y

CONFIG_DEBUG_FS=y
CONFIG_FUNCTION_TRACER=y

*and disable below config:
# CONFIG_STRICT_MEMORY_RWX

-----code changes ------
*LINUX/android/kernel/fs/pstore/ram.c
-static ulong ramoops_console_size = MIN_MEM_SIZE;
+static ulong ramoops_console_size = 256*1024UL;

- static ulong mem_address;
+ static ulong mem_address=0x9ff00000;
 module_param(mem_address, ulong, 0400);
 MODULE_PARM_DESC(mem_address,
         "start of reserved RAM used to store oops/panic logs");
 
- static ulong mem_size;
+ static ulong mem_size=0x100000;

*kernel/arch/arm/boot/dts/qcom/msm8916-memory.dtsi
        peripheral_mem: pheripheral_region@0 {
            linux,reserve-contiguous-region;
            linux,reserve-region;
            linux,remove-completely;
            reg = &lt;0x0 0x8b600000 0x0 0x0600000&gt;;
            label = "peripheral_mem";
        };
       
+        pstore_reserve_mem: pstore_reserve_mem_region@0 {
+            linux,reserve-contiguous-region;
+            linux,reserve-region;
+            linux,remove-completely;
+            reg = &lt;0x0 0x9ff00000 0x0 0x00100000&gt;;
+            label = "pstore_reserve_mem";
+        }; 
</pre>
<dl><dd>按照上面的方法修改了代码，编译烧录后，按下面的测试命令验证发现不生效，pstore相关文件节点有创建，但是/sys/fs/pstore/目录下没有任何相关信息保存，从现象开起来，memory中的信息在重启后是没有保留的<br></dd></dl>
<pre>-----test command ------
*enable record ftrace
# mount -t debugfs debugfs /sys/kernel/debug/
# echo 1 &gt; /sys/kernel/debug/pstore/record_ftrace
*disable download mode:
# echo 0 &gt; /sys/module/msm_poweroff/parameters/download_mode
*# echo c &gt; /proc/sysrq-trigger
[...device restart]
# ls /sys/fs/pstore/
  console-ramoops
  dmesg-ramoops-0
  dmesg-ramoops-1
  ftrace-ramoops
*# cat /sys/fs/pstore/ftrace-ramoops
0 c08bf830  c08bfbf0  do_page_fault.part.8 &lt;- do_page_fault+0x3c/0xa8
0 c001b770  c08bfb48  fixup_exception &lt;- do_page_fault.part.8+0x32c/0x398
0 c0045bb0  c001b780  search_exception_tables &lt;- fixup_exception+0x20/0x38
0 c008914c  c0045bd8  search_module_extables &lt;- search_exception_tables+0x38/0x44
0 c08bff5c  c008915c  add_preempt_count &lt;- search_module_extables+0x24/0xc0
0 c08bfe78  c00891cc  sub_preempt_count &lt;- search_module_extables+0x94/0xc0
0 c08b2e28  c08bfb64  __do_kernel_fault.part.7 &lt;- do_page_fault.part.8+0x348/0x398
</pre>
<dl><dd>经过和FAE进行相关讨论和验证，Thundersoft的工程师也复现了此问题，经过一些debugging，作出了如下修改建议</dd></dl>
<pre>drivers/power/reset/msm-poweroff.c
 module_param_call(download_mode, dload_set, param_get_int,
                        &amp;download_mode, 0644);
 static int panic_prep_restart(struct notifier_block *this,
@@ -198,7 +198,11 @@ static void msm_restart_prepare(const char *cmd)
        if (get_dload_mode() || (cmd&nbsp;!= NULL &amp;&amp; cmd[0]&nbsp;!= '\0'))
                qpnp_pon_system_pwr_off(PON_POWER_OFF_WARM_RESET);
        else
+#if 0  
                qpnp_pon_system_pwr_off(PON_POWER_OFF_HARD_RESET);
+#else
+               qpnp_pon_system_pwr_off(PON_POWER_OFF_WARM_RESET);
+#endif
</pre>
<dl><dd>这一段修改代码的原理就是将PMIC从Hard reset修改为了Warm reset，这样内存就得到了保留。pstore机制是linux平台的，所以在MTK平台也是通用的。</dd></dl>
<p>Enjoy it！<br>
</p>
<h2><span class="mw-headline" id="How_to_use_it"><b>How to use it</b></span></h2>
<p>打开pstore的宏，系统crush之后，会自动将crush信息保存在
</p><p>/sys/fs/pstore
</p><p>例如，我们通过SysRq手动去触发一个crush：
</p><p><a href="http://10.120.10.100:9002/%E6%96%87%E4%BB%B6:Sysrq_crush.jpg" class="image"><img alt="Sysrq crush.jpg" src="./Enable PStore for Kernel Debugging - CKT成都维基_files/Sysrq_crush.jpg" width="384" height="18"></a>
</p><p>系统会触发一个空指针的crush导致系统重启，重启后查看pstore保存的信息：
</p><p><a href="http://10.120.10.100:9002/%E6%96%87%E4%BB%B6:Pstore.jpg" class="image"><img alt="Pstore.jpg" src="./Enable PStore for Kernel Debugging - CKT成都维基_files/Pstore.jpg" width="636" height="71"></a>
</p><p>console-ramoops文件中基本保存了上次系统crush的栈信息和backtrace,这些信息对debug的帮助不言而喻。
</p><p><a href="http://10.120.10.100:9002/Page_link_to_uplevel" title="Page link to uplevel" class="mw-redirect">返回上级</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.150 seconds
Real time usage: 0.659 seconds
Preprocessor visited node count: 36/1000000
Preprocessor generated node count: 76/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wikidb_201505:pcache:idhash:20839-0!*!0!!*!5!* and timestamp 20150601051010 and revision id 137410
 -->
</div>									<div class="printfooter">
						取自“<a dir="ltr" href="http://10.120.10.100:9002/index.php?title=Enable_PStore_for_Kernel_Debugging&oldid=137410">http://10.120.10.100:9002/index.php?title=Enable_PStore_for_Kernel_Debugging&amp;oldid=137410</a>”					</div>
													<div id="catlinks" class="catlinks catlinks-allhidden"></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>导航菜单</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">个人工具</h3>
						<ul>
							<li id="pt-uls" class="active"><a href="http://10.120.10.100:9002/Enable_PStore_for_Kernel_Debugging#" class="uls-trigger autonym" tabindex="0" role="button" aria-haspopup="true" original-title="">中文（中国大陆）‎</a></li><li id="pt-login"><a href="http://10.120.10.100:9002/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&returnto=Enable+PStore+for+Kernel+Debugging" title="我们鼓励您登录；然而，这不是强制性的[alt-shift-o]" accesskey="o">登录</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">命名空间</h3>
						<ul>
															<li id="ca-nstab-main" class="selected"><span><a href="./Enable PStore for Kernel Debugging - CKT成都维基_files/Enable PStore for Kernel Debugging - CKT成都维基.html" title="查看内容页面[alt-shift-c]" accesskey="c">页面</a></span></li>
															<li id="ca-talk" class="new"><span><a href="http://10.120.10.100:9002/index.php?title=%E8%AE%A8%E8%AE%BA:Enable_PStore_for_Kernel_Debugging&action=edit&redlink=1" title="关于内容页面的讨论[alt-shift-t]" accesskey="t">讨论</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label" tabindex="0"><span>变种</span><a href="http://10.120.10.100:9002/Enable_PStore_for_Kernel_Debugging#" tabindex="-1"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">视图</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="./Enable PStore for Kernel Debugging - CKT成都维基_files/Enable PStore for Kernel Debugging - CKT成都维基.html">阅读</a></span></li>
															<li id="ca-viewsource"><span><a href="http://10.120.10.100:9002/index.php?title=Enable_PStore_for_Kernel_Debugging&action=edit" title="本页面受到保护。
您可以查看其源代码[alt-shift-e]" accesskey="e">查看源代码</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="http://10.120.10.100:9002/index.php?title=Enable_PStore_for_Kernel_Debugging&action=history" title="本页面过去的版本[alt-shift-h]" accesskey="h">查看历史</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label" tabindex="0"><span>更多</span><a href="http://10.120.10.100:9002/Enable_PStore_for_Kernel_Debugging#" tabindex="-1"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">搜索</label>
						</h3>

						<form action="http://10.120.10.100:9002/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="搜索" title="搜索CKT成都维基[alt-shift-f]" accesskey="f" id="searchInput" tabindex="1" class="webfonts-changed" autocomplete="off"><input type="hidden" value="特殊:搜索" name="title" class="webfonts-changed"><input type="submit" name="go" value="前往" title="若相同标题存在，则直接前往该页面" id="searchButton" class="searchButton webfonts-changed">								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="http://10.120.10.100:9002/%E9%A6%96%E9%A1%B5" title="访问首页"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">导航</h3>

			<div class="body">
									<ul>
													<li id="n-mainpage-description"><a href="http://10.120.10.100:9002/%E9%A6%96%E9%A1%B5" title="访问首页[alt-shift-z]" accesskey="z">首页</a></li>
													<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="查找帮助的地方">帮助</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-Team_Entry" aria-labelledby="p-Team_Entry-label">
			<h3 id="p-Team_Entry-label">Team Entry</h3>

			<div class="body">
									<ul>
													<li id="n-FeaturePhone"><a href="http://10.120.10.100:9002/FP_Technical_Material">FeaturePhone</a></li>
													<li id="n-SmartPhone"><a href="http://10.120.10.100:9002/SP_Technical_Material">SmartPhone</a></li>
													<li id="n-HW"><a href="http://10.120.10.100:9002/HW_Technical_Material">HW</a></li>
													<li id="n-Testing"><a href="http://10.120.10.100:9002/Test_Technical_Material">Testing</a></li>
													<li id="n-PM"><a href="http://10.120.10.100:9002/PM_Technical_Material">PM</a></li>
													<li id="n-OfficialWebsite"><a href="http://10.120.10.100:9002/Official_website">OfficialWebsite</a></li>
													<li id="n-QA"><a href="http://10.120.10.100:9002/Test_QA_Area">QA</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">工具</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="http://10.120.10.100:9002/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/Enable_PStore_for_Kernel_Debugging" title="所有链接至本页面的wiki页面的列表[alt-shift-j]" accesskey="j">链入页面</a></li>
													<li id="t-recentchangeslinked"><a href="http://10.120.10.100:9002/%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/Enable_PStore_for_Kernel_Debugging" title="链自本页的页面的最近更改[alt-shift-k]" accesskey="k">相关更改</a></li>
													<li id="t-specialpages"><a href="http://10.120.10.100:9002/%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面的列表[alt-shift-q]" accesskey="q">特殊页面</a></li>
													<li id="t-print"><a href="http://10.120.10.100:9002/index.php?title=Enable_PStore_for_Kernel_Debugging&printable=yes" rel="alternate" title="本页面的可打印版本[alt-shift-p]" accesskey="p">打印版本</a></li>
													<li id="t-permalink"><a href="http://10.120.10.100:9002/index.php?title=Enable_PStore_for_Kernel_Debugging&oldid=137410" title="本页面该版本的固定链接">固定链接</a></li>
													<li id="t-info"><a href="http://10.120.10.100:9002/index.php?title=Enable_PStore_for_Kernel_Debugging&action=info" title="关于此页面的更多信息">页面信息</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> 本页面最后修改于2015年1月28日 (星期三) 09:59。</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://10.120.10.100:9002/Wiki:%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96" title="Wiki:隐私政策">隐私政策</a></li>
											<li id="footer-places-about"><a href="http://10.120.10.100:9002/Wiki:%E5%85%B3%E4%BA%8E" title="Wiki:关于">关于CKT成都维基</a></li>
											<li id="footer-places-disclaimer"><a href="http://10.120.10.100:9002/Wiki:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Wiki:免责声明">免责声明</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-poweredbyico">
															<a href="http://www.mediawiki.org/"><img src="./Enable PStore for Kernel Debugging - CKT成都维基_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"ready","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt","ext.visualEditor.targetLoader"],null,true);
}</script>
<script src="./Enable PStore for Kernel Debugging - CKT成都维基_files/geoiplookup"></script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":1239});
}</script>
	

<div class="suggestions" style="display: none; font-size: 13px;"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body></html>