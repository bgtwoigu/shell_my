<!DOCTYPE html>
<!-- saved from url=(0168)http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E5.85.AB.E7.AB.A0.EF.BC.9AUI_.E5.90.8C.E6.AD.A5WIFI_AP.E7.8A.B6.E6.80.81.E5.8F.98.E5.8C.96 -->
<html lang="zh-CN" dir="ltr" class="client-js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.20.2">
<link rel="alternate" type="application/x-wiki" title="编辑" href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit">
<link rel="edit" title="编辑" href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit">
<link rel="shortcut icon" href="http://10.120.10.100:9002/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="http://10.120.10.100:9002/opensearch_desc.php" title="CKT_Chengdu_Wiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="http://10.120.10.100:9002/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="CKT_Chengdu_Wiki的Atom" href="http://10.120.10.100:9002/index.php?title=Special:RecentChanges&feed=atom">
<link rel="stylesheet" href="http://10.120.10.100:9002/load.php?debug=false&lang=zh-cn&modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&only=styles&skin=monobook&*">
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><style>.mw-collapsible-toggle{float:right} li .mw-collapsible-toggle{float:none} .mw-collapsible-toggle-li{list-style:none}
/* cache key: wikidb:resourceloader:filter:minify-css:7:4250852ed2349a0d4d0fc6509a3e7d4c */.suggestions{overflow:hidden;position:absolute;top:0;left:0;width:0;border:none;z-index:1099;padding:0;margin:-1px -1px 0 0} html > body .suggestions{margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0}.suggestions-result{color:black;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left}.suggestions-result-current{background-color:#4C59A6;color:white}.suggestions-special .special-label{color:gray;text-align:left}.suggestions-special .special-query{color:black;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:silver}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:white}.autoellipsis-matched,.highlight{font-weight:bold}
/* cache key: wikidb:resourceloader:filter:minify-css:7:9780324491b653a3780e2d029bdc140c */</style><meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikidb:resourceloader:filter:minify-css:7:7a3748d34e6456ae8d0f053363f745f7 */</style>

<script src="./AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki_files/load.php"></script><script src="./AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki_files/load(1).php"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"AOSP_Android4.4_wifi(二)","wgTitle":"AOSP Android4.4 wifi(二)","wgCurRevisionId":131077,"wgArticleId":23433,"wgIsArticle":true,"wgAction":"view","wgUserName":"Haolong.zhang","wgUserGroups":["EditGrp","*","user","autoconfirmed"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"AOSP_Android4.4_wifi(二)","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgFCKEditorDir":"extensions/WYSIWYG/ckeditor/","wgFCKEditorExtDir":"extensions/WYSIWYG","wgFCKEditorToolbarSet":"Wiki","wgFCKEditorHeight":"0","wgCKeditorMagicWords":{"wikitags":["nowiki","includeonly","onlyinclude","noinclude","4cs","6502acme","6502kickass","6502tasm","68000devpac","abap","actionscript","actionscript3","ada","algol68","apache","applescript","apt_sources","arm","asm","asp","asymptote","autoconf","autohotkey","autoit","avisynth","awk","bascomavr","bash","basic4gl","bf","bibtex","blitzbasic","bnf","boo","c","c_loadrunner","c_mac","caddcl","cadlisp","cfdg","cfm","chaiscript","cil","clojure","cmake","cobol","coffeescript","cpp","cpp-qt","csharp","css","cuesheet","d","dcl","dcpu16","dcs","delphi","diff","dos","dot","e","ecmascript","eiffel","email","epc","erlang","euphoria","f1","falcon","fo","fortran","freebasic","freeswitch","fsharp","gambas","gdb","genero","genie","gettext","glsl","gml","gnuplot","go","groovy","gwbasic","haskell","haxe","hicest","hq9plus","html4strict","html5","icon","idl","ini","inno","intercal","io","j","java","java5","javascript","jquery","kixtart","klonec","klonecpp","latex","lb","ldif","lisp","llvm","locobasic","logtalk","lolcode","lotusformulas","lotusscript","lscript","lsl2","lua","m68k","magiksf","make","mapbasic","matlab","mirc","mmix","modula2","modula3","mpasm","mxml","mysql","nagios","netrexx","newlisp","nsis","oberon2","objc","objeck","ocaml","ocaml-brief","octave","oobas","oorexx","oracle11","oracle8","oxygene","oz","parasail","parigp","pascal","pcre","per","perl","perl6","pf","php","php-brief","pic16","pike","pixelbender","pli","plsql","postgresql","povray","powerbuilder","powershell","proftpd","progress","prolog","properties","providex","purebasic","pycon","pys60","python","q","qbasic","rails","rebol","reg","rexx","robots","rpmspec","rsplus","ruby","sas","scala","scheme","scilab","sdlbasic","smalltalk","smarty","spark","sparql","sql","stonescript","systemverilog","tcl","teraterm","text","thinbasic","tsql","typoscript","unicon","upc","urbi","uscript","vala","vb","vbnet","vedit","verilog","vhdl","vim","visualfoxpro","visualprolog","whitespace","whois","winbatch","xbasic","xml","xorg_conf","xpp","yaml","z80","zxbasic","pre","gallery","ref","references"],"magicwords":["NOTOC","FORCETOC","TOC","NOEDITSECTION","NEWSECTIONLINK","NONEWSECTIONLINK","NOCONTENTCONVERT","NOCC","NOTITLECONVERT","NOTC","NOGALLERY","INDEX","NOINDEX","STATICREDIRECT","NOGALLERY","HIDDENCAT","START","END"],"datevars":["CURRENTYEAR","CURRENTMONTH","CURRENTMONTHNAME","CURRENTMONTHNAMEGEN","CURRENTMONTHABBREV","CURRENTDAY","CURRENTDAY2","CURRENTDOW","CURRENTDAYNAME","CURRENTTIME","CURRENTHOUR","CURRENTWEEK","CURRENTTIMESTAMP"],"wikivars":["SITENAME","SERVER","SERVERNAME","DIRMARK","SCRIPTPATH","CURRENTVERSION","CONTENTLANG","REVISIONID","REVISIONDAY","REVISIONDAY2","REVISIONMONTH","REVISIONYEAR","REVISIONTIMESTAMP","REVISIONUSER","FULLPAGENAME","PAGENAME","BASEPAGENAME","SUBPAGENAME","SUBJECTPAGENAME","TALKPAGENAME","NAMESPACE","ARTICLESPACE","TALKSPACE"],"parserhooks":["lc","lcfirst","uc","ucfirst","formatnum","#dateformat","padleft","padright","plural","grammar","#language","int","#tag","#int","#ns","#nse","#urlencode","#lcfirst","#ucfirst","#lc","#uc","#localurl","#localurle","#fullurl","#fullurle","#canonicalurl","#canonicalurle","#formatnum","#grammar","#gender","#plural","#numberofpages","#numberofusers","#numberofactiveusers","#numberofarticles","#numberoffiles","#numberofadmins","#numberingroup","#numberofedits","#numberofviews","#padleft","#padright","#anchorencode","#special","#speciale","#defaultsort","#filepath","#pagesincategory","#pagesize","#protectionlevel","#namespace","#namespacee","#namespacenumber","#talkspace","#talkspacee","#subjectspace","#subjectspacee","#pagename","#pagenamee","#fullpagename","#fullpagenamee","#basepagename","#basepagenamee","#subpagename","#subpagenamee","#talkpagename","#talkpagenamee","#subjectpagename","#subjectpagenamee","#formatdate","#displaytitle"]},"wgCKeditorUseBuildin4Extensions":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":"1","rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3
,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"riched_use_toggle":1,"riched_start_disabled":1,"riched_use_popup":1,"riched_toggle_remember_state":1,"variant":"en","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"nickname":"","timecorrection":"Offset|0","watchlisttoken":"e6d2d70fd3fee5a373912c45a169d30d69f324af"});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"7f854e3efd76516a1d5bfa25eb76daf0+\\","watchToken":"013108fe2915399aed164e7ef766485d+\\"});;},{},{});
/* cache key: wikidb:resourceloader:filter:minify-js:7:4d8b63159f9853cbca5e417a216f03d0 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><script type="text/javascript" src="./AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki_files/load(2).php"></script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-AOSP_Android4_4_wifi_二 skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading"><span dir="auto">AOSP Android4.4 wifi(二)</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">来自CKT_Chengdu_Wiki</div>
		<div id="contentSub" lang="zh-CN" dir="ltr"></div>
		<div id="jump-to-nav" class="mw-jump">跳转到： <a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#column-one">导航</a>、<a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#searchInput">搜索</a></div>
		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><a href="http://10.120.10.100:9002/index.php/Page_link_to_uplevel" title="Page link to uplevel" class="mw-redirect">返回上级</a>
</p><p><br> 
</p>
<pre>== <b>第零章：前言</b> ==
</pre>
<p>本章主要介绍wifi AP 的打开流程： 包括以下部分：
</p><p>1：上层setting.apk 打开wifi AP 按钮到打开底层驱动，disable wifi， store wifi status;
</p><p>2：配置HOSTAPD_CONF_FILE 
</p><p>3：打开Native Deamon hostapd  
</p><p>与本章相关的其他三个部分将在以后的wiki中解释，包括：
</p><p>1：WLAN kernel driver 的常见架构
</p><p>2：hostapd Native Daemon 架构
</p><p>3：共享网络Tethering，WIFI AP 是怎样共享其他网络的 
</p><p><br>
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>目录</h2><span class="toctoggle">&nbsp;[<a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#" class="internal" id="togglelink">隐藏</a>]&nbsp;</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E4.B8.80.E7.AB.A0.EF.BC.9A.E5.89.8D.E6.9C.9F.E5.87.86.E5.A4.87"><span class="tocnumber">1</span> <span class="toctext"><b>第一章：前期准备</b></span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#A:.E9.80.9A.E4.BF.97.E7.9F.A5.E8.AF.86"><span class="tocnumber">1.1</span> <span class="toctext"><b>A:通俗知识  </b></span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#B:.E6.AD.A4wiki.E6.B6.89.E5.8F.8A.E4.BB.A3.E7.A0.81.E8.B7.AF.E5.BE.84"><span class="tocnumber">1.2</span> <span class="toctext"><b>B:此wiki涉及代码路径 </b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E4.BA.8C.E7.AB.A0.EF.BC.9A.E4.B8.8A.E5.B1.82enable_wifi_AP.E4.B9.8BCMD_SET_AP.E5.91.BD.E4.BB.A4"><span class="tocnumber">2</span> <span class="toctext"><b>第二章：上层enable wifi AP之CMD_SET_AP命令</b></span></a></li>
<li class="toclevel-1 tocsection-5"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E4.B8.89.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E6.89.93.E5.BC.80WLAN_kernel_driver"><span class="tocnumber">3</span> <span class="toctext"><b>第三章：命令CMD_START_AP之打开WLAN kernel driver</b></span></a></li>
<li class="toclevel-1 tocsection-6"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E5.9B.9B.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E8.8E.B7.E5.8F.96.E4.B8.8A.E5.B1.82.E9.85.8D.E7.BD.AEAP.E7.9A.84.E5.8F.82.E6.95.B0"><span class="tocnumber">4</span> <span class="toctext"><b>第四章：命令CMD_START_AP之获取上层配置AP的参数</b></span></a></li>
<li class="toclevel-1 tocsection-7"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E4.BA.94.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E4.B8.8B.E8.BD.BDWLAN_AP.E5.9B.BA.E4.BB.B6"><span class="tocnumber">5</span> <span class="toctext"><b>第五章：命令CMD_START_AP之下载WLAN AP固件</b></span></a></li>
<li class="toclevel-1 tocsection-8"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E5.85.AD.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E9.85.8D.E7.BD.AEHOSTAPD_CONF_FILE"><span class="tocnumber">6</span> <span class="toctext"><b>第六章：命令CMD_START_AP之配置HOSTAPD_CONF_FILE</b></span></a></li>
<li class="toclevel-1 tocsection-9"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E4.B8.83.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E5.90.AF.E5.8A.A8hostpad"><span class="tocnumber">7</span> <span class="toctext"><b>第七章：命令CMD_START_AP之启动hostpad</b></span></a></li>
<li class="toclevel-1 tocsection-10"><a href="./AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki_files/AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki.html"><span class="tocnumber">8</span> <span class="toctext"><b>第八章：UI 同步WIFI AP状态变化</b></span></a></li>
<li class="toclevel-1 tocsection-11"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)#.E7.AC.AC.E4.B9.9D.E7.AB.A0.EF.BC.9A.E7.BB.93.E6.9D.9F.E8.AF.AD"><span class="tocnumber">9</span> <span class="toctext"><b>第九章：结束语</b></span></a></li>
</ul>
</td></tr></tbody></table>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=1" title="编辑段落：第一章：前期准备">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.B8.80.E7.AB.A0.EF.BC.9A.E5.89.8D.E6.9C.9F.E5.87.86.E5.A4.87"> <b>第一章：前期准备</b> </span></h2>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=2" title="编辑段落：A:通俗知识">编辑</a>]</span> <span class="mw-headline" id="A:.E9.80.9A.E4.BF.97.E7.9F.A5.E8.AF.86"> <b>A:通俗知识  </b></span></h3>
<pre>  wifi热点是指把手机的接收GPRS或3G信号转化为wifi信号再发出去，这样手机就成了一个WIFI热点（摘自百度百科）;
</pre>
<p>wifi Ap 只是一种共享网络的方式，还有很多的共享网络的方式，诸如：USB，BT，NFC等
</p>
<h3><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=3" title="编辑段落：B:此wiki涉及代码路径">编辑</a>]</span> <span class="mw-headline" id="B:.E6.AD.A4wiki.E6.B6.89.E5.8F.8A.E4.BB.A3.E7.A0.81.E8.B7.AF.E5.BE.84"> <b>B:此wiki涉及代码路径 </b></span></h3>
<p>Setting.apk部分文件： packages/apps/Settings/src/com/android/settings/wifi/WifiApEnabler.java 
</p><p>wifi状态机 ：                 frameworks/base/wifi/java/android/net/wifi/WifiStateMachine.java
</p><p>wifi服务 ：                     frameworks/base/services/java/com/android/server/wifi/WifiService.java
</p><p>wifi监视器 ：                 frameworks/base/wifi/java/android/net/wifi/WifiManager.java
</p><p>wifi状态控制器 ：         frameworks/base/services/java/com/android/server/wifi/WifiController.java
</p><p>wifi 配置相关 ：           frameworks/base/wifi/java/android/net/wifi/WifiConfiguration.java
</p><p>android网络管理 ：     frameworks/base/services/java/com/android/server/NetworkManagementService.java
</p><p>netd 本地进程  ：        system/netd/×
</p><p>wifi HAL  ：                 hardware/libhardware_legacy/wifi/wifi.c
</p><p>wifi java native JNI&nbsp;:  frameworks/base/core/jni/android_net_wifi_WifiNative.cpp
</p><p>hostpad    &nbsp;:               external/wpa_supplicant_8/hostapd/*
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=4" title="编辑段落：第二章：上层enable wifi AP之CMD SET AP命令">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.BA.8C.E7.AB.A0.EF.BC.9A.E4.B8.8A.E5.B1.82enable_wifi_AP.E4.B9.8BCMD_SET_AP.E5.91.BD.E4.BB.A4"> <b>第二章：上层enable wifi AP之CMD_SET_AP命令</b> </span></h2>
<pre> 直接走代码流程
</pre>
<p>&gt;&gt;&gt;step 1:WifiApEnabler.java:
</p><p>onPreferenceChange() ---&gt; startProvisioningIfNecessary() ---&gt; startTethering() ---&gt; setSoftapEnabled()
</p><p>setSoftapEnabled()做以下工作：
</p><p>1：保存wifi当前的状态：Settings.Global.putInt(cr, Settings.Global.WIFI_SAVED_STATE, 1);
</p><p>2：如果wifi为非STATE_DISABLED则关闭wifi:mWifiManager.setWifiEnabled(false);
</p><p>3: 调用WifiManager的setWifiApEnabled方法： mWifiManager.setWifiApEnabled(null, enable)
</p><p>&gt;&gt;&gt;step 2:WifiManager.java:
</p><p>setWifiApEnabled() ---&gt; mService.setWifiApEnabled(wifiConfig, enabled);调用wifiService中方法
</p><p>&gt;&gt;&gt;step 3:WifiService.java
</p><p>setWifiApEnabled() ---&gt;mWifiController.obtainMessage(CMD_SET_AP, enabled&nbsp;? 1&nbsp;: 0, 0, wifiConfig).sendToTarget();
</p><p>发送消息CMD_SET_AP 给WifiController
</p><p>step 4:WifiController.java
</p><p>class.StaDisabledWithScanState-&gt;processMessage() 处理消息：disable sta 模式SACN 断开SUPPLICENT
	  	....
		....
</p>
<pre>             case CMD_SET_AP:
             // Before starting tethering, turn off supplicant for scan mode
</pre>
<p>		if (msg.arg1 == 1) {
		deferMessage(msg);
		transitionTo(mApStaDisabledState);
		....
		....
</p><p>class.ApStaDisabledState-&gt;processMessage() 处理消息: mWifiStateMachine.setHostApRunning(）转移AP start 命令
		....
		....
</p>
<pre>               case CMD_SET_AP:
                   if (msg.arg1 == 1) {
                       mWifiStateMachine.setHostApRunning((WifiConfiguration) msg.obj,
                               true);
                       transitionTo(mApEnabledState);
                   }
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 5:WifiStateMachine.java
</p><p>setHostApRunning() 发送消息 sendMessage(CMD_START_AP, wifiConfig);
</p><p>至此打开AP的命令CMD_SET_AP 就转移到 CMD_START_AP 的处理了。
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=5" title="编辑段落：第三章：命令CMD START AP之打开WLAN kernel driver">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.B8.89.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E6.89.93.E5.BC.80WLAN_kernel_driver"> <b>第三章：命令CMD_START_AP之打开WLAN kernel driver</b> </span></h2>
<p>消息CMD_START_AP由WifiStateMachine也由WifiStateMachine自己处理，这一节讲CMD_START_AP更新wifi状态以及打开内核驱动的过程
</p><p>&gt;&gt;&gt;step 1:class.InitialState()processMessage 处理消息CMD_START_AP: a:调用mWifiNative.loadDriver来打开驱动;b:改变wifi状态
		....
		....
</p>
<pre>               case CMD_START_AP:
                   if (mWifiNative.loadDriver()) {
                       setWifiApState(WIFI_AP_STATE_ENABLING);
                       transitionTo(mSoftApStartingState);
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 2:android_net_wifi_WifiNative.cpp
</p><p>{ "loadDriver", "()Z",  (void *)android_net_wifi_loadDriver }, 
android_net_wifi_loadDriver() ---&gt;&nbsp;::wifi_load_driver()
</p><p>&gt;&gt;&gt;step 3:wifi.c
</p><p>wifi_load_driver()这个函数的处理不同的方案有不同的处理方式：
</p><p>a:驱动如果以KO的方式存在的话，这个时候就加载驱动insmod ***.ko&nbsp;:insmod(DRIVER_MODULE_PATH, DRIVER_MODULE_ARG 
</p><p>并且设置驱动prop ok&nbsp;:property_set(DRIVER_PROP_NAME, "ok")
</p><p>b:驱动采用build in的方式，则只需要设置驱动prop ok 即可： property_set(DRIVER_PROP_NAME, "ok");
</p><p>备注：
</p><p>×：为了提高wifi的开启速度，现在一般采用build in 的方式
</p><p>×：DRIVER_PROP_NAME 的作用：一般用做wifi 硬件上电和下电（节能），这部分一般一般在init.rc中实现
</p><p>至此，CMD_START_AP用于open WLAN kernel driver的过程就完成了
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=6" title="编辑段落：第四章：命令CMD START AP之获取上层配置AP的参数">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E5.9B.9B.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E8.8E.B7.E5.8F.96.E4.B8.8A.E5.B1.82.E9.85.8D.E7.BD.AEAP.E7.9A.84.E5.8F.82.E6.95.B0"> <b>第四章：命令CMD_START_AP之获取上层配置AP的参数</b> </span></h2>
<p>消息CMD_START_AP 还会触发WifiConfiguration 配置上层配置的AP 的相关参数，以便后面传给hostpad;
</p><p>包括的参数：
</p><p>KeyMgmt: WPA2_PSK Protocols: 
</p><p>AuthAlgorithms: 
</p><p>PairwiseCiphers: 
</p><p>GroupCiphers: 
</p><p>PSK: * 
</p><p>IP assignment: 
</p><p>Proxy settings: 
</p><p>imsi: 
</p><p>simSlot:
</p><p>pcsc:
</p><p>pacFile:
</p><p>phase1: 
</p><p>Channel: 
</p><p>ChannelWidth: 
</p><p>IEEE80211W:  
</p><p>看看流程吧
</p><p>&gt;&gt;&gt;step 1: WifiStateMachine.java
</p><p>class SoftApStartingState-&gt;enter()
		....
		....
</p>
<pre>           if (message.what == CMD_START_AP) {
               final WifiConfiguration config = (WifiConfiguration) message.obj;
</pre>
<p>		....
</p>
<pre>		....
</pre>
<p>&gt;&gt;&gt;step 2:WifiConfiguration.java
</p><p>WifiConfiguration()获得旧的配置，返回config供netd 解析，并传递给hostapd,如果有更新则保存，
</p><p>详细的获得配置过程见WifiConfiguration.java
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=7" title="编辑段落：第五章：命令CMD START AP之下载WLAN AP固件">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.BA.94.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E4.B8.8B.E8.BD.BDWLAN_AP.E5.9B.BA.E4.BB.B6"> <b>第五章：命令CMD_START_AP之下载WLAN AP固件</b> </span></h2>
<p>我们知道WLAN 可以工作在三种模式:AP（热点，本wiki讨论）， STA（普通的链接无线路由器上网模式）， P2P（wifi display, DLINK等），固工作在不同模式的时候，
</p><p>WLAN 需要的固件有可能不同，所以工作在AP的模式下，需要下载AP 对应的固件;当然部分WLAN 芯片所有模式用的固件都是相同的，但是在代码框架上还是要加以区分，
</p><p>只是这类WLAN 芯片到最后都下载同一份固件而已。
</p><p>好，还是看看消息CMD_START_AP 触发的下载固件过程吧。第四章讲解了CMD_START_AP消息触发的获取wifi config 的过程，当获取了config后，就可以调用
</p><p>startAccessPoint了
</p><p>&gt;&gt;&gt;step 1:networkManagementService.java
startAccessPoint()
</p><p>		....
		....
</p>
<pre>           wifiFirmwareReload(wlanIface, "AP");
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 2:networkManagementService.java
wifiFirmwareReload()
</p><p>		....
		....
</p>
<pre>           mConnector.execute("softap", "stopap");//确保AP 模式已经被disable了
           wifiFirmwareReload(wlanIface, "STA");
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 3:networkManagementService.java
wifiFirmwareReload()
</p><p>		....
		....
</p>
<pre>           mConnector.execute("softap", "fwreload", wlanIface, mode);//通过sockect 发送命令fwreload 给netd 进程
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 4: system/netd/CommandListener.cpp
CommandListener::SoftapCmd::runCommand 
</p><p>		....
		....
</p>
<pre>   } else if (!strcmp(argv[1], "stopap")) {
       rc = sSoftapCtrl-&gt;stopSoftap();
   } else if (!strcmp(argv[1], "fwreload")) {
       rc = sSoftapCtrl-&gt;fwReloadSoftap(argc, argv); // 调用fwReloadSoftap
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 5:/system/netd/SoftapController.cpp
fwReloadSoftap() 
</p><p>		....
		....
</p>
<pre>   if (strcmp(argv[3], "AP") == 0) { 
       fwpath = (char *)wifi_get_fw_path(WIFI_GET_FW_PATH_AP); //获得AP 模式下固件的路径
   } else if (strcmp(argv[3], "P2P") == 0) {
       fwpath = (char *)wifi_get_fw_path(WIFI_GET_FW_PATH_P2P);
   } else if (strcmp(argv[3], "STA") == 0) {
       fwpath = (char *)wifi_get_fw_path(WIFI_GET_FW_PATH_STA);
   }
   if (!fwpath)
       return ResponseCode::CommandParameterError;
   if (wifi_change_fw_path((const char *)fwpath)) {
       ALOGE("Softap fwReload failed");
       return ResponseCode::OperationFailed;
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 6:wifi.c
const char *wifi_get_fw_path(int fw_type)
{
</p>
<pre>   ALOGD("enter --&gt;%s fw_type=%d\n", __func__, fw_type);
   switch (fw_type) {
   case WIFI_GET_FW_PATH_STA:
       return WIFI_DRIVER_FW_PATH_STA;
   case WIFI_GET_FW_PATH_AP:
       return WIFI_DRIVER_FW_PATH_AP;
   case WIFI_GET_FW_PATH_P2P:
       return WIFI_DRIVER_FW_PATH_P2P;
   }
   return NULL;
</pre>
<p>}
&gt;&gt;&gt;step 7:wifi.c
wifi_change_fw_path()
</p><p>		....
		....
</p>
<pre>   fd = TEMP_FAILURE_RETRY(open(WIFI_DRIVER_FW_PATH_PARAM, O_WRONLY)); //打开WLAN内核驱动控制节点
   if (fd &lt; 0) {
       ALOGE("Failed to open wlan fw path param (%s)", strerror(errno));
       return -1;
   }
   len = strlen(fwpath) + 1;
   if (TEMP_FAILURE_RETRY(write(fd, fwpath, len))&nbsp;!= len) { //写固件 
       ALOGE("Failed to write wlan fw path param (%s)", strerror(errno));
</pre>
<p>		....
		....
</p><p>至此TEMP_FAILURE_RETRY(write(fd, fwpath, len))&nbsp;!= len 完成写内核驱动固件的过程
</p><p>备注：
</p><p>×：wifiFirmwareReload 下载固件 interface AP（这个interface 可以在 config.xml中指定） 
</p><p>×：mConnector.execute通过sockct 和 native 进程netd 交互，
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=8" title="编辑段落：第六章：命令CMD START AP之配置HOSTAPD CONF FILE">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E5.85.AD.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E9.85.8D.E7.BD.AEHOSTAPD_CONF_FILE"> <b>第六章：命令CMD_START_AP之配置HOSTAPD_CONF_FILE</b> </span></h2>
<p>经过第五章的流程，startAccessPoint()完成了wifiFirmwareReload(wlanIface, "AP");
</p><p>接下来配置HOSTAPD_CONF_FILE
</p><p>&gt;&gt;&gt;step 1: NetworkManagementService.java
startAccessPoint()
</p><p>		....
		....
</p>
<pre>               mConnector.execute("softap", "set", wlanIface, wifiConfig.SSID,
                                  hiddenSSid, wifiConfig.channel, getSecurityType(wifiConfig),
                                  new SensitiveArg(wifiConfig.preSharedKey),
                                  wifiConfig.channelWidth,
                                  clientNum,
                                  userWantsHoptspotSuspendOpt);

</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 2: system/netd/CommandListener.cpp
CommandListener::SoftapCmd::runCommand 
</p><p>		....
		....
</p>
<pre>       free(retbuf);
       return 0;
   } else if (!strcmp(argv[1], "set")) {
       rc = sSoftapCtrl-&gt;setSoftap(argc, argv); //调用设置HOSTAPD_CONF_FILE
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 3: system/netd/SoftapController.cpp
SoftapController::setSoftap()
</p><p>		....
		....  //根据第四章获得的config 依次填充fbuf
</p>
<pre>   ALOGD("setSoftap as:\n%s\n", fbuf);
   fd = open(HOSTAPD_CONF_FILE, O_CREAT | O_TRUNC | O_WRONLY | O_NOFOLLOW, 0660); //打开HOSTAPD_CONF_FILE
</pre>
<p>		....
		....
</p>
<pre>   }
   if (write(fd, fbuf, strlen(fbuf)) &lt; 0) { //写HOSTAPD_CONF_FILE
       ALOGE("Cannot write to \"%s\":&nbsp;%s", HOSTAPD_CONF_FILE, strerror(errno));
       ret = ResponseCode::OperationFailed;
   }
</pre>
<p>		....
		....
</p><p>至此，上层空间配置的ap config就写道了HOSTAPD_CONF_FILE
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=9" title="编辑段落：第七章：命令CMD START AP之启动hostpad">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.B8.83.E7.AB.A0.EF.BC.9A.E5.91.BD.E4.BB.A4CMD_START_AP.E4.B9.8B.E5.90.AF.E5.8A.A8hostpad"> <b>第七章：命令CMD_START_AP之启动hostpad</b> </span></h2>
<p>本章讲解收到CMD_START_AP后怎么启动hostapd，以及改变wifi AP的状态
</p><p>&gt;&gt;&gt;step 1: NetworkManagementService.java
</p><p>startAccessPoint()
</p><p>		....
		....
</p>
<pre>             mConnector.execute("softap", "startap");       
       
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 2: system/netd/CommandListener.cpp
</p><p>CommandListener::SoftapCmd::runCommand 
</p><p>		....
		....
</p>
<pre>   if (!strcmp(argv[1], "startap")) {
       rc = sSoftapCtrl-&gt;startSoftap(); //调用startSoftap
</pre>
<p>		....
		....
</p><p>&gt;&gt;&gt;step 3:/system/netd/SoftapController.cpp
SoftapController::startSoftap()
</p><p>		....
		....
</p>
<pre>       ensure_entropy_file_exists(); //确保认证文件的存在
       if (execl(HOSTAPD_BIN_FILE, HOSTAPD_BIN_FILE, //正式启动hostapd Deamon 进程
                 "-e", WIFI_ENTROPY_FILE,
                 HOSTAPD_CONF_FILE, (char *) NULL)) {
           ALOGE("execl failed (%s)", strerror(errno));
</pre>
<p>		....
		....
</p>
<pre>       }
</pre>
<p>&gt;&gt;&gt;step 4:WifiStateMachine.java
</p><p>startSoftApWithConfig()
</p><p>调用mNwService.startAccessPoint(config, mInterfaceName);成功后，调用sendMessage(CMD_START_AP_SUCCESS);
</p><p>&gt;&gt;&gt;step 5:WifiStateMachine.java
</p><p>class SoftApStartingState-&gt;processMessage()处理消息CMD_START_AP_SUCCESS ，
</p><p>		....
		....
</p>
<pre>               case CMD_START_AP_SUCCESS:
                   setWifiApState(WIFI_AP_STATE_ENABLED); //改变状态
                   Xlog.d(TAG, "Stop monitoring before start new monitoring!");
                   mHotspotMonitor.stopMonitoring();
                   mHotspotMonitor.startMonitoring(); //监控hostapd传上来的wifi 改变
                   transitionTo(mSoftApStartedState);
</pre>
<p>		....
		....
</p><p>至此：hostapd 已经跑一起来了
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=10" title="编辑段落：第八章：UI 同步WIFI AP状态变化">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E5.85.AB.E7.AB.A0.EF.BC.9AUI_.E5.90.8C.E6.AD.A5WIFI_AP.E7.8A.B6.E6.80.81.E5.8F.98.E5.8C.96"> <b>第八章：UI 同步WIFI AP状态变化</b> </span></h2>
<p>在第三章 setWifiApState(WIFI_AP_STATE_ENABLING)
</p><p>以及第七章setWifiApState(WIFI_AP_STATE_ENABLED)
</p><p>这两个状态会被WifiApEnabler.java
</p><p>的handleWifiApStateChanged()来更新UI
</p><p>		....
		....
</p>
<pre>           case WifiManager.WIFI_AP_STATE_ENABLING:
               setSwitchEnabled(false);
               setStartTime(false);
               if (mSwitch == null) {
                   mSwitchPreference.setSummary(R.string.wifi_tether_starting);
               }
               break;
           case WifiManager.WIFI_AP_STATE_ENABLED:
               /**
                * Summary on enable is handled by tether
                * broadcast notice
</pre>
<p>		....
</p>
<h2><span class="editsection">[<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&section=11" title="编辑段落：第九章：结束语">编辑</a>]</span> <span class="mw-headline" id=".E7.AC.AC.E4.B9.9D.E7.AB.A0.EF.BC.9A.E7.BB.93.E6.9D.9F.E8.AF.AD"> <b>第九章：结束语</b> </span></h2>
<p>更多的参考： android wiki&nbsp;: ap and  WifiStateMachine
</p><p><br> 
<a href="http://10.120.10.100:9002/index.php/Page_link_to_uplevel" title="Page link to uplevel" class="mw-redirect">返回上级</a>
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 45/1000000
Preprocessor generated node count: 52/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:23433-0!*!0!!zh-cn!*!* and timestamp 20141225104721 -->
</div><div class="printfooter">
来自“<a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&oldid=131077">http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(二)&amp;oldid=131077</a>”</div>
		<div id="catlinks" class="catlinks catlinks-allhidden"></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one" lang="zh-CN" dir="ltr">
	<div id="p-cactions" class="portlet">
		<h5>查看</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://10.120.10.100:9002/index.php/AOSP_Android4.4_wifi(%E4%BA%8C)" primary="1" context="subject" title="查看内容页面 [alt-c]" accesskey="c">页面</a></li>
				<li id="ca-talk" class="new"><a href="http://10.120.10.100:9002/index.php?title=Talk:AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit&redlink=1" primary="1" context="talk" title="有关内容页面的讨论 [alt-t]" accesskey="t">讨论</a></li>
				<li id="ca-edit"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=edit" primary="1" title="你可以编辑本页面。请在保存前使用预览按钮。 [alt-e]" accesskey="e">编辑</a></li>
				<li id="ca-history"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=history" rel="archives" title="本页面过去的版本 [alt-h]" accesskey="h">历史</a></li>
				<li id="ca-move"><a href="http://10.120.10.100:9002/index.php/Special:MovePage/AOSP_Android4.4_wifi(%E4%BA%8C)" title="移动本页 [alt-m]" accesskey="m">移动</a></li>
				<li id="ca-watch"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&action=watch&token=a286cf95ec288c73f227ba8f9103ece9%2B%5C" title="添加本页面至你的监视列表 [alt-w]" accesskey="w">监视</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>个人工具</h5>
		<div class="pBody">
			<ul lang="zh-CN" dir="ltr">
				<li id="pt-userpage"><a href="http://10.120.10.100:9002/index.php/User:Haolong.zhang" class="new" title="你的用户页面 [alt-.]" accesskey=".">Haolong.zhang</a></li>
				<li id="pt-mytalk"><a href="http://10.120.10.100:9002/index.php/User_talk:Haolong.zhang" class="new" title="你的讨论页面 [alt-n]" accesskey="n">我的讨论页</a></li>
				<li id="pt-preferences"><a href="http://10.120.10.100:9002/index.php/Special:Preferences" title="你的系统设置">系统设置</a></li>
				<li id="pt-watchlist"><a href="http://10.120.10.100:9002/index.php/Special:Watchlist" title="你正在监视更改的页面的列表 [alt-l]" accesskey="l">监视列表</a></li>
				<li id="pt-mycontris"><a href="http://10.120.10.100:9002/index.php/Special:Contributions/Haolong.zhang" title="你的贡献列表 [alt-y]" accesskey="y">贡献</a></li>
				<li id="pt-logout"><a href="http://10.120.10.100:9002/index.php?title=Special:UserLogout&returnto=AOSP+Android4.4+wifi%28%E4%BA%8C%29" title="退出登录">退出</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
<a href="http://10.120.10.100:9002/index.php/Main_Page" style="background-image: url(/cklogo.jpg);" title="访问首页"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>导航</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage-description"><a href="http://10.120.10.100:9002/index.php/Main_Page" title="访问首页 [alt-z]" accesskey="z">首页</a></li>
				<li id="n-help"><a href="http://10.120.10.100:9002/index.php/Help:Contents" title="查找帮助的地方">帮助</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-Team_Entry">
		<h5>Team Entry</h5>
		<div class="pBody">
			<ul>
				<li id="n-FeaturePhone"><a href="http://10.120.10.100:9002/index.php/FP_Technical_Material">FeaturePhone</a></li>
				<li id="n-SmartPhone"><a href="http://10.120.10.100:9002/index.php/SP_Technical_Material">SmartPhone</a></li>
				<li id="n-HW"><a href="http://10.120.10.100:9002/index.php/HW_Technical_Material">HW</a></li>
				<li id="n-Testing"><a href="http://10.120.10.100:9002/index.php/Test_Technical_Material">Testing</a></li>
				<li id="n-QA"><a href="http://10.120.10.100:9002/index.php/Test_QA_Area">QA</a></li>
				<li id="n-OfficialWebsite"><a href="http://10.120.10.100:9002/index.php/Official_website">OfficialWebsite</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">搜索</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://10.120.10.100:9002/index.php" id="searchform">
				<input type="hidden" name="title" value="Special:Search">
				<input type="search" name="search" title="在CKT_Chengdu_Wiki中搜索 [alt-f]" accesskey="f" id="searchInput" autocomplete="off" placeholder="搜索">
				<input type="submit" name="go" value="提交" title="如果相同的标题存在的话便直接前往该页面" id="searchGoButton" class="searchButton">&nbsp;
				<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton">
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>工具箱</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="http://10.120.10.100:9002/index.php/Special:WhatLinksHere/AOSP_Android4.4_wifi(%E4%BA%8C)" title="所有链入本页的wiki页面列表 [alt-j]" accesskey="j">链入页面</a></li>
				<li id="t-recentchangeslinked"><a href="http://10.120.10.100:9002/index.php/Special:RecentChangesLinked/AOSP_Android4.4_wifi(%E4%BA%8C)" title="本页链入的页面的最近更改 [alt-k]" accesskey="k">相关更改</a></li>
				<li id="t-upload"><a href="http://10.120.10.100:9002/index.php/Special:Upload" title="上传文件 [alt-u]" accesskey="u">上传文件</a></li>
				<li id="t-specialpages"><a href="http://10.120.10.100:9002/index.php/Special:SpecialPages" title="所有特殊页面的列表 [alt-q]" accesskey="q">特殊页面</a></li>
				<li id="t-print"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&printable=yes" rel="alternate" title="本页面的可打印版本 [alt-p]" accesskey="p">打印版本</a></li>
				<li id="t-permalink"><a href="http://10.120.10.100:9002/index.php?title=AOSP_Android4.4_wifi(%E4%BA%8C)&oldid=131077" title="本页面该版本的永久链接">永久链接</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" lang="zh-CN" dir="ltr">
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="./AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31"></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> 本页面最后修改于2014年12月25日 (星期四) 10:47。</li>
		<li id="viewcount">此页面已被浏览过16次。</li>
		<li id="privacy"><a href="http://10.120.10.100:9002/index.php/CKT_Chengdu_Wiki:Privacy_policy" title="CKT Chengdu Wiki:Privacy policy">隐私权政策</a></li>
		<li id="about"><a href="http://10.120.10.100:9002/index.php/CKT_Chengdu_Wiki:About" title="CKT Chengdu Wiki:About">关于CKT_Chengdu_Wiki</a></li>
		<li id="disclaimer"><a href="http://10.120.10.100:9002/index.php/CKT_Chengdu_Wiki:General_disclaimer" title="CKT Chengdu Wiki:General disclaimer">免责声明</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"loading"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","mediawiki.page.watch.ajax","mediawiki.searchSuggest"], null, true);
}</script><script src="./AOSP Android4.4 wifi(二) - CKT_Chengdu_Wiki_files/load(3).php" type="text/javascript"></script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<script>if(window.mw){
mw.loader.state({"user.groups":"ready"});
}</script>
<!-- Served in 0.391 secs. --><div class="suggestions" style="display: none; font-size: 12px;"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body></html>